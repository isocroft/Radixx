{"version":3,"sources":["webpack://Radixx/webpack/universalModuleDefinition","webpack://Radixx/webpack/bootstrap","webpack://Radixx/./node_modules/process/browser.js","webpack://Radixx/(webpack)/buildin/global.js","webpack://Radixx/./src/es/components/dispatcher.js","webpack://Radixx/./src/es/components/observable.js","webpack://Radixx/./src/es/index.js","webpack://Radixx/./src/es/utils/helpers.js","webpack://Radixx/./src/es/utils/primitive-checkers.js","webpack://Radixx/./src/es/utils/routines/basics.js","webpack://Radixx/./src/es/utils/routines/extras.js"],"names":["ce","wind","CustomEvent","e","CEvent","prototype","Object","create","w","Event","persistStore","top","localStorage","sessStore","sessionStorage","opera","Hop","call","scriptStorage","mode","document","documentMode","autoRehydrationOccured","config","watchers","stores","storeKeys","observers","_promises","waitQueue","cachedStorageKeys","dispatchRegistry","getAppOriginForPersist","String","location","origin","cfg","localHostDev","documentElement","id","generateTag","_cdata","getItem","getNormalized","Math","random","replace","substring","defaultConfig","runtime","spaMode","shutDownHref","persistenceEnabled","autoRehydrate","universalCoverage","triggerEvt","target","eType","detail","globale","evt","cancelable","bubbles","dispatch","cancelBubble","setCapture","apply","operationOnStoreSignal","fn","queueing","area","action","$$history","length","$$initData","slice","$$historyIndex","newStoreState","len","_key","actionData","coverageNotifier","$$historyLocation","get","TypeError","put","$$currentStoreTitle","source","$$withAction","url","href","key","newValue","aspect","actionKey","type","actionType","push","unshift","val","JSON","parse","setNormalized","stringify","getActionOnStack","index","actionsStack","$$redoActionsStack","currentAction","_tag","$$tag","setItem","state","appState","title","historyLoc","fireWatchers","omitCallback","pos","watcher","$$canOmit","setAppState","isolatedState","storeTitle","Area","getAppState","appStateData","indexStart","indexEnd","values","_data","i","observer","console","log","name","indexOf","split","eachStore","extractor","storeArray","bind","callable","prevIndex","next","returnVal","Boolean","handlePromises","promise","isResolved","resolve","enforceCoverage","_origin","$$origin","_action","_state","_title","_hloc","_composedData","parseInt","setTimeout","stateWatcher","event","includes","listeners","$$store_listeners","t","params","d","undefined","createEvent","initCustomEvent","createEventObject","returnValue","setupConfigSettings","hub","onDispatch","data","updateAutoRehydrationState","onbeforeunload","onunload","addEventListener","attachEvent","isIE8Storage","begin","value","commit","del","removeItem","Dispatcher","middlewares","$$undoActionsStack","middleware","Error","userConfig","defaultStoreContainer","callback","store","getTitle","splice","hydrateAction","stateArea","regFunc","historyIndex","mutationType","getRegistration","canUndo","canRedo","compactedFunc","baseDispatchCallback","dispatcher","prevState","boundBaseDispatchCallback","adjoiner","createDispatchResolver","_hasMiddleware","hasMiddleware","concat","reduceRight","bound","regId","actionTypes","vector","$instance","getInstance","getObjectPrototype","getPrototypeOf","obj","__proto__","constructor","iterateOnStore","createStoreInterface","method","argument","arguments","setStoreListener","unsetStoreListener","unregister","signalUnique","register","handleStoreMutation","createActionInterface","stateAspectKey","getId","typesBitMask","addToActonsRegistry","actionDefinition","Array","definition","Number","Values","isOfType","signal","watchDispatcher","watch","isAppStateAutoRehydrated","getAutoRehydrationState","setupShutdownCallback","_ping","mergeConfig","initCatchers","purgePersistStore","deletePersistenceTagAndData","registerAction","toString","substr","setActionsRegistry","makeAggregator","query","setMiddlewareCallback","middlewareFunc","getMiddleware","ex","setMiddleware","setActionVectors","object","vectors","_proto","creator","setStoreObserver","defaultStateObj","methods","c","observable","makeStore","dataTitle","registerCallback","_store","args","Store","storeObject","makeActionCreators","Action","actionObject","purgePersistentStorage","attachMiddleware","handler","requestAggregator","_hub","configure","onShutdown","Helpers","Payload","isEqual","former","latter","keysA","keys","keysB","bHasOwnProperty","hasOwnProperty","error","nullable","Int","isFinite","Float","parseFloat","any","process","navigator","product","global","window","self","Slc","isNullOrUndefined","each","iterator","context","prop","extend","dest","merge","curry","func","_args","futuresStates","STARTED","AWAIT","RESOLVED","REJECTED","formatOptions","options","_opts","opts","savedData","Routines","fireStart","fireEnd","fired","firing","pending","queue","multiple","fire","$decline","save","shift","unpack","add","start","arg","join","disable","hasFn","result","hasList","fireWith","Futures","defTracks","reject","notify","setter","fnName","arr","forPromise","drop","ax","always","done","fail","then","ret","forEach","item","rt","isRejected","pipe","AWAITING","__beforeunload","__unload","__hasDeactivated","_checkAndKillEventPropagation","stopPropagation","$createBeforeTearDownCallback","lastActivatedNode","currentFocusElement","explicitOriginalTarget","srcDocument","activeElement","currentTarget","srcElement","leaveMessage","isLogoff","hasAttribute","getAttribute","__timeOutCallback","lock","beforeUnloadTimer","_confirm","confirm","clearTimeout","$createTearDownCallback","appstate","getState","disconnect","destroy","typesMap","Date","RegExp","Function","toLowerCase","test","requirementTypes","serviceRequirementsMap","dependentStores","that","toJSON","makeTrait","argsLeft","waitsFor"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;ACvLtC;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;;;;;;;;;;;;ACnBA;;AACA;;;;AAGA,IAAI;AACE,KAAMA,KAAK,IAAIC,aAAKC,WAAT,CAAqB,MAArB,CAAX;AACL,CAFD,CAEE,OAAMC,CAAN,EAAS;;AAEHC,QAAOC,SAAP,GAAmBJ,aAAKK,MAAL,CAAYC,MAAZ,CAAqBC,EAAEC,KAAF,IAAWD,EAAEC,KAAF,CAAQJ,SAApB,IAAkC,EAAtD,CAAnB;AACAJ,cAAKC,WAAL,GAAmB,IAAnB;AACAD,cAAKC,WAAL,GAAmBE,MAAnB;AACP;;AAED,IAAMM,eAAgBT,aAAKU,GAAL,KAAaV,YAAb,IAAqB,CAACA,aAAKW,YAA5B,GAA4C,IAA5C,GAAmDX,aAAKW,YAA7E;;AAEA,IAAMC,YAAaZ,aAAKU,GAAL,KAAaV,YAAb,IAAqB,CAACA,aAAKa,cAA3B,GAA6Cb,aAAKc,KAAL,IAAc,CAAEC,YAAIC,IAAJ,CAAShB,YAAT,EAAe,OAAf,CAAhB,GAA2CA,aAAKc,KAAL,CAAWG,aAAtD,GAAsE,EAAnH,GAA0HjB,aAAKa,cAAlJ;;AAEA,IAAMK,OAAOlB,aAAKmB,QAAL,CAAcC,YAAd,IAA8B,CAA3C;;AAEA,IAAIC,yBAAyB,KAA7B;;AAEA,IAAIC,SAAS,IAAb;;AAEI,IAAMC,WAAW,EAAjB;;AAIA,IAAMC,SAAS,EAAf;;AAIA,IAAMC,YAAY,EAAlB;;AAIA,IAAMC,YAAY,EAAlB;;AAIA,IAAMC,YAAY,EAAlB;;AAIA,IAAMC,YAAY,EAAlB;;AAIA,IAAMC,oBAAoB,EAA1B;;AAIJ,IAAMC,mBAAmB,EAAzB;;AAIA,IAAMC,yBAAyB,SAAzBA,sBAAyB;AAAA,QAAOC,OAAOhC,aAAKiC,QAAL,CAAcC,MAAd,IAAwBC,IAAIC,YAAJ,GAAmB,MAAIpC,aAAKmB,QAAL,CAAckB,eAAd,CAA8BC,EAArD,GAA0D,EAAlF,CAAP,CAAP;AAAA,CAA/B;;AAEA,IAAMC,cAAc,SAAdA,WAAc,SAAU;;AAE7B,KAAMC,SAAS/B,aAAagC,OAAb,CAAqBP,MAArB,CAAf;;AAEA,KAAG,CAAC,+BAAkBM,MAAlB,CAAJ,EAA8B;;AAE7B,SAAOE,cAAcF,MAAd,CAAP;AACA;;AAED,QAAOR,OAAOW,KAAKC,MAAL,EAAP,EAAsBC,OAAtB,CAA8B,GAA9B,EAAkC,IAAlC,EAAwCC,SAAxC,CAAkD,CAAlD,EAAqD,EAArD,CAAP;AACA,CAVD;;AAYA,IAAMC,gBAAgB;AACpBC,UAAQ;AACPC,WAAQ,IADD;AAEPC,gBAAa;AAFN,EADY;AAKpBC,qBAAmB,KALC;AAMpBC,gBAAc,KANM;AAOpBC,oBAAkB,KAPE;AAQpBjB,eAAa;AARO,CAAtB;;AAWA,IAAMkB,aAAa,SAAbA,UAAa,CAACC,MAAD,EAASC,KAAT,EAAgBC,MAAhB,EAAwBC,OAAxB,EAAoC;AAC/C,KAAMC,MAAM,IAAI1D,WAAJ,CAAgBuD,KAAhB,EAAuB;AACfC,gBADe;AAEfG,cAAW,IAFI;AAGfC,WAAQ;AAHO,EAAvB,CAAZ,CAD+C,CAKvC;;AAER,KAAIC,WAAW;AAAA,SAAM,KAAN;AAAA,EAAf;;AAEA,KAAI,EAAE,YAAYH,GAAd,CAAD,IACQA,IAAII,YAAJ,KAAqB,IADhC,EACqC;;AAEjCR,SAAOS,UAAP,CAAkB,IAAlB;AACH;;AAED;AACAF,YAAWP,OAAS,EAAE,YAAYI,GAAd,IAAqB,WAArB,GAAmC,eAA5C,CAAX;;AAEA;AACA,QAAOG,SAASG,KAAT,CAAeV,MAAf,EAAwB,EAAE,YAAYI,GAAd,IAAqB,QAAMH,KAAN,EAAeG,GAAf,CAArB,GAA4C,CAAEA,GAAF,CAApE,CAAP;AACP,CApBD;;AAsBA,IAAMO,yBAAyB,SAAzBA,sBAAyB,CAACC,EAAD,EAAKC,QAAL,EAAeC,IAAf,EAAqBC,MAArB,EAAgC;;AAE1D;AACA,KAAGH,GAAGI,SAAH,CAAaC,MAAb,IAAuB,CAAvB,IACF,CAACL,GAAGM,UADL,EACiB;;AAElBN,KAAGM,UAAH,GAAgBN,GAAGI,SAAH,CAAa,CAAb,CAAhB;AACE;;AAED;AACAJ,IAAGI,SAAH,GAAeJ,GAAGI,SAAH,CAAaG,KAAb,CAAmB,CAAnB,EAAsBP,GAAGQ,cAAH,GAAoB,CAA1C,CAAf;;AAEA;AACA,KAAIC,gBAAgB,KAApB;AAAA,KAA2BC,YAA3B;AAAA,KAAgCC,aAAhC;;AAEA;AACA;;AAEA,KAAGV,aAAa,IAAhB,EAAqB;;AAEpB,MAAGE,WAAW,IAAd,EAAmB;;AAElBM,mBAAgBN,OAAOS,UAAvB;AAEA,GAJD,MAIK;;AAEJH,mBAAgBT,GAAGI,SAAH,CAAaJ,GAAGQ,cAAhB,CAAhB;AACA;;AAEDK,mBAAiBC,iBAAjB,GAAqCd,GAAGQ,cAAxC;AAEA,EAbD,MAaK;;AAEJC,kBAAgBT,GAAGnD,IAAH,CAAQoD,QAAR,EAAkBE,MAAlB,EAA2BD,KAAKa,GAAL,MAAcf,GAAGM,UAA5C,CAAhB;AAGA;;AAEJ,KAAG,OAAOG,aAAP,KAAyB,SAAzB,IACC,+BAAkBA,aAAlB,CADJ,EACqC;;AAEpC,QAAM,IAAIO,SAAJ,CAAc,kEAAd,CAAN;;AAEA;AACA;;AAEDL,QAAOT,KAAKe,GAAL,CAASR,aAAT,CAAP;;AAEAI,kBAAiBK,mBAAjB,GAAuCP,IAAvC;;AAEG,KAAGR,WAAW,IAAd,EAAmB;;AAElB,MAAGA,OAAOgB,MAAP,KAAkB,SAArB,EAA+B;AAC7B;AACD;;AAEDN,mBAAiBO,YAAjB,GAAgC,IAAhC;;AAEAjC,aACDtD,aAAKmB,QADJ,EAED,aAFC,EAGD;AACCqE,QAAIxF,aAAKiC,QAAL,CAAcwD,IADnB;AAECC,QAAIZ,IAFL;AAGCa,aAASf,aAHV;AAICU,WAAOtF,YAJR;AAKC4F,WAAOtB,OAAOuB,SALf;AAMCC,SAAKxB,OAAOyB;AANb,GAHC,EAWD/F,YAXC;;AAcA;AACA;AACA6E,QAAMV,GAAGI,SAAH,CAAayB,IAAb,CAAkBpB,aAAlB,CAAN,CAxBkB,CAwBsB;;AAExCT,KAAGQ,cAAH;;AAEAK,mBAAiBC,iBAAjB,GAAqCd,GAAGQ,cAAxC;;AAEA,MAAGR,GAAGI,SAAH,CAAaC,MAAb,GAAsB,EAAzB,EAA4B;AAAE;;AAE9BL,MAAGI,SAAH,CAAa0B,OAAb;AACC;AAED,EAnCD,MAmCK;;AAEJjB,mBAAiBC,iBAAjB,GAAqCd,GAAGQ,cAAxC;;AAEA,SAAOC,aAAP;AACA;AAEJ,CA5FF;;AA8FI,IAAMlC,gBAAgB,SAAhBA,aAAgB,MAAO;;AAE5B,KAAG,+BAAkBwD,GAAlB,KAA0BA,QAAQ,MAArC,EACE,OAAO,IAAP;;AAEL,KAAG;AACF,SAAOC,KAAKC,KAAL,CAAWF,GAAX,CAAP;AACA,EAFD,CAEC,OAAMhG,CAAN,EAAQ;AACR,SAAO8B,OAAOkE,GAAP,CAAP;AACA;AACD,CAVE;;AAYA,IAAMG,gBAAgB,SAAhBA,aAAgB,MAAO;;AAE5B,KAAG,+BAAkBH,GAAlB,CAAH,EACCA,MAAM,IAAN;;AAEJ,KAAG;AACF,SAAOC,KAAKG,SAAL,CAAeJ,GAAf,CAAP;AACA,EAFD,CAEC,OAAMhG,CAAN,EAAQ;;AAER,SAAO8B,OAAOkE,GAAP,CAAP;AACA;AACD,CAXE;;AAaH,IAAMK,mBAAmB,SAAnBA,gBAAmB,CAACC,KAAD,EAAW;;AAEnC,KAAMC,eAAevC,uBAAuBwC,kBAA5C;;AAEA,KAAGD,aAAajC,MAAhB,EAAuB;AACtB,MAAG,OAAOgC,KAAP,KAAiB,QAApB,EAA6B;AAC5B,UAAOC,aAAaA,aAAajC,MAAb,GAAsB,CAAnC,CAAP;AACA,GAFD,MAEK;AACJ,UAAOiC,aAAaD,KAAb,CAAP;AACA;AACD;;AAED,QAAO,IAAP;AACA,CAbD;;AAeG,IAAMxB,mBAAmB,SAAnBA,gBAAmB,WAAY;;AAEjC,KAAI2B,gBAAgB,IAApB;;AAEA,KAAMC,OAAO5B,iBAAiB6B,KAA9B;;AAEA,KAAG7B,iBAAiBO,YAAjB,KAAkC,IAArC,EAA0C;AAC/CoB,kBAAgBJ,kBAAhB;AACAvB,mBAAiBO,YAAjB,GAAgC,IAAhC;AACA,EAHK,MAGD;AACJoB,kBAAgBJ,iBAAiBvB,iBAAiBC,iBAAlC,CAAhB;AACA;;AAEK,KAAG,CAAC,+BAAkB2B,IAAlB,CAAD,IACJnG,iBAAiB,IADhB,EACsB;;AAE3BA,eAAaqG,OAAb,CAAqBF,IAArB,EAA2BP,cAAc;AACjCU,UAAMC,QAD2B;AAEvC1C,WAAOqC,aAFgC;AAGvCM,UAAMjC,iBAAiBK,mBAHgB;AAIvC6B,eAAWlC,iBAAiBC;AAJW,GAAd,CAA3B;;AAOAD,mBAAiBC,iBAAjB,GAAqC,IAArC;AACA;AACE,CAzBD;;AA2BA,IAAMkC,eAAe,SAAfA,YAAe,CAACJ,KAAD,EAAQK,YAAR,EAAyB;;AAEhD,KAAIC,YAAJ;AAAA,KAASC,gBAAT;;AAEA,MAAID,GAAJ,IAAW9F,QAAX,EAAoB;AACnB,MAAGR,YAAIC,IAAJ,CAASO,QAAT,EAAmB8F,GAAnB,CAAH,EAA2B;AAC1BC,aAAU/F,SAAS8F,GAAT,CAAV;AACA,OAAGD,YAAH,EAAgB;AACf,QAAGE,QAAQC,SAAX,EAAqB;AACpB;AACA;AACD;AACDD,WAAQtG,IAAR,CAAa,IAAb,EAAmB+F,KAAnB;AACA;AACD;AACD,CAfE;;AAiBH,IAAMS,cAAc,SAAdA,WAAc,CAASR,QAAT,EAAmB;;AAErC,mBAAKA,QAAL,EAAe,UAACS,aAAD,EAAgBC,UAAhB,EAA+B;;AAE7C,MAAMrD,OAAO,IAAIsD,IAAJ,CAASD,UAAT,CAAb;;AAEArD,OAAKe,GAAL,CAASqC,aAAT;AAEA,EAND;;AAQAN,cAAaH,QAAb,EAAuB,IAAvB;AACD,CAXD;;AAaG,IAAMY,cAAc,SAAdA,WAAc,GAAW;;AAE1B,KAAMC,eAAe,EAArB;AACA,KAAInC,YAAJ;AACA,KAAIoC,mBAAJ;AACA,KAAIC,iBAAJ;AACA,KAAIC,eAAJ;AACA,KAAIC,cAAJ;;AAEA,KAAI,SAASrH,SAAV,IACS,OAAOA,UAAU8E,GAAjB,IAAwB,UADpC,EACgD;;AAE5C;AACA,OAAI,IAAIwC,IAAE,CAAV,EAAaA,IAAItH,UAAU4D,MAA3B,EAAmC0D,GAAnC,EAAuC;AACnCxC,SAAM9E,UAAU8E,GAAV,CAAcwC,CAAd,CAAN;AACAD,WAAQrH,UAAU6B,OAAV,CAAkBiD,GAAlB,CAAR;;AAEA,OAAG,OAAOuC,KAAP,KAAiB,QAAjB,IACEA,MAAMzD,MAAN,KAAiB,CADtB,EACwB;AACnC2D,eAAWzG,UAAUgE,GAAV,CAAX;AACA,QAAG,CAAC,CAACyC,QAAF,IACCA,SAAS5D,SAAT,CAAmBC,MADvB,EAC8B;AAC7ByD,aAAQE,SAAS5D,SAAT,CAAmB,CAAnB,CAAR;AAEA,KAJD,MAIK;AACJ0D,aAAQ,IAAR;AACA;AACD;;AAEDJ,gBAAanC,GAAb,IAAqB,OAAOuC,KAAP,KAAiB,QAAjB,GAA4BvF,cAAcuF,KAAd,CAA5B,GAAmDA,KAAxE;AACAG,WAAQC,GAAR,CAAY,6BAAZ,EAA2CR,YAA3C,EAAyD,QAAzD,EAAmEnF,cAAcuF,KAAd,CAAnE;AACS;AACJ,EAvBD,MAuBK;;AAGD,OAAI,IAAIC,IAAI,CAAZ,EAAeA,IAAIzG,UAAU+C,MAA7B,EAAqC0D,GAArC,EAAyC;;AAErCxC,SAAMjE,UAAUyG,CAAV,CAAN;;AAEA,OAAGrG,kBAAkB6D,GAAlB,CAAH,EAA0B;;AAEtBoC,iBAAa9H,aAAKsI,IAAL,CAAUC,OAAV,CAAkB7C,GAAlB,CAAb;;AAEAqC,eAAW/H,aAAKsI,IAAL,CAAUC,OAAV,CAAkB,GAAlB,EAAuBT,UAAvB,CAAX;;AAEAE,aAAUhI,aAAKsI,IAAL,CAAUxF,SAAV,CAAoBgF,UAApB,EAAgCC,QAAhC,CAAD,CAA4CS,KAA5C,CAAkD,KAAlD,KAA4D,CAAC,EAAD,EAAK,IAAL,CAArE;;AAEAP,YAAQD,OAAO,CAAP,CAAR;AAEH,IAVD,MAUM;AACjBG,eAAWzG,UAAUgE,GAAV,CAAX;AACA,QAAG,CAAC,CAACyC,QAAF,IACCA,SAAS5D,SAAT,CAAmBC,MADvB,EAC8B;AAC7ByD,aAAQE,SAAS5D,SAAT,CAAmB,CAAnB,CAAR;AACA,KAHD,MAGK;AACJ0D,aAAQ,IAAR;AACA;AACD;;AAEDJ,gBAAanC,GAAb,IAAqB,OAAOuC,KAAP,KAAiB,QAAjB,GAA4BvF,cAAcuF,KAAd,CAA5B,GAAmDA,KAAxE;AACS;AACJ;;AAED,QAAOJ,YAAP;AACP,CAhEE;;AAkEH,IAAMY,YAAY,SAAZA,SAAY,CAAStE,EAAT,EAAauE,SAAb,EAAwBC,UAAxB,EAAmC;;AAEpD,mBAAKlH,SAAL,EAAgBiH,UAAUE,IAAV,CAAgBD,aAAa,EAA7B,EAAkCnH,MAAlC,CAAhB;;AAEM,KAAIqH,WAAW1E,EAAf;AACA,KAAI2E,YAAYH,WAAWnE,MAAX,GAAoB,CAApC;;AAEA,KAAMuE,OAAO,SAAPA,IAAO,GAAM;;AAExB,MAAIC,kBAAJ;;AAEA,MAAGF,aAAa,CAAhB,EAAkB;AACjBE,eAAYC,QACXJ,SAAS7H,IAAT,CACE,IADF,EAEE2H,WAAWG,WAAX,CAFF,EAGEC,IAHF,CADW,CAAZ;AAOA,GARD,MAQK;AACJF,cAAW,CAAC,CAAZ;AACAG,eAAYH,QAAZ;AACA;;AAED,SAAOG,SAAP;AACA,EAlBK;;AAoBAD;AACN,CA5BD;;AA8BA,IAAMG,iBAAiB,SAAjBA,cAAiB,GAAM;AACtB,KAAIC,UAAU,IAAd;AACA,KAAMpC,QAAQa,aAAd;;AAEA,MAAI,IAAMX,OAAV,IAAmBtF,SAAnB,EAA6B;AAClC,MAAGZ,YAAIC,IAAJ,CAASW,SAAT,EAAoBsF,OAApB,CAAH,EAA8B;AAC7BkC,aAAUxH,UAAUsF,OAAV,CAAV;AACA,OAAG,CAACkC,QAAQC,UAAR,EAAJ,EAAyB;AACxBD,YAAQE,OAAR;AACA;AACD,UAAO1H,UAAUsF,OAAV,CAAP;AACA;AACD;;AAEKrF,WAAU4C,MAAV,GAAmB,CAAnB;;AAEA2C,cAAaJ,KAAb;AACH,CAjBJ;;AAmBA,IAAMuC,kBAAkB,SAAlBA,eAAkB,IAAK;;AAEtB,KAAMC,UAAUD,gBAAgBE,QAAhC;AACA,KAAM5C,OAAO0C,gBAAgBzC,KAA7B;AACA,KAAI4C,UAAU,IAAd;AACA,KAAIC,SAAS,IAAb;AACA,KAAIC,SAAS,IAAb;AACA,KAAIC,QAAQ,IAAZ;AACA,KAAIC,gBAAgB,IAApB;AACA,KAAI1B,WAAW,IAAf;;AAEA;AACA,KAAI,oBAAoBvH,SAAxB,EAAmC;AACxCV,IAAEwF,GAAF,GAAQxF,EAAEuD,MAAF,CAASiC,GAAjB;AACA;;AAEK,KAAG,CAACjF,YAAD,IACL8I,YAAYrJ,EAAEwF,GADZ,EACgB;AAAE;AACvB;AACA;;AAEKmE,iBAAgBnH,cAAcjC,aAAagC,OAAb,CAAqBmE,IAArB,CAAd,CAAhB;;AAEA,KAAGA,SAAS1G,EAAEwF,GAAX,IACL,+BAAkBmE,aAAlB,CADE,EAC+B;AACpC;AACA;;AAEKH,UAASG,cAAc9C,KAAvB;;AAEA0C,WAAUI,cAAcvF,MAAxB;;AAEAqF,UAASE,cAAc5C,KAAvB;;AAEA2C,SAAQE,SAASD,cAAc3C,UAAvB,CAAR;;AAEA,KAAGuC,YAAY,IAAf,EAAoB;AACzBvF,yBAAuBwC,kBAAvB,CAA0CV,IAA1C,CAA+CyD,OAA/C;AACA;;AAEK,KAAGG,UAAU,IAAb,EAAkB;AACvBzB,aAAWzG,UAAUiI,MAAV,CAAX;AACA,MAAGxB,QAAH,EAAY;AACXA,YAASxD,cAAT,GAA0BiF,KAA1B;AACA,OAAGA,UAAU,CAAC,CAAd,EAAgB;AACfzB,aAAS5D,SAAT,CAAmBC,MAAnB,GAA4B,CAA5B;AACA;AACD;AACD;;AAEK,KAAGkF,MAAH,EAAU;AACfK,aACCvC,YAAYoB,IAAZ,CAAiB,IAAjB,EAAuBc,MAAvB,CADD,EAEE,CAFF;AAGA;AACE,CAvDJ;;AAyDA,IAAMM,eAAe,SAAfA,YAAe,IAAK;;AAEzB9J,KAAIA,KAAKF,aAAKiK,KAAd;;AAEA,KAAGxI,UAAUyI,QAAV,CAAmBhK,EAAEuD,MAAF,CAASiC,GAA5B,CAAH,EAAoC;AAC1B,MAAMgC,aAAaxH,EAAEuD,MAAF,CAASiC,GAA5B;AACA,MAAIyE,kBAAJ;;AAEA,MAAG,CAAC,+BAAkBzI,UAAUgG,UAAV,CAAlB,CAAJ,EAA6C;;AAErDyC,eAAYzI,UAAUgG,UAAV,EAAsB0C,iBAAlC;;AAEA,QAAI,IAAIC,IAAE,CAAV,EAAaA,IAAIF,UAAU3F,MAA3B,EAAmC6F,GAAnC,EAAuC;;AAEtCF,cAAUE,CAAV,EAAarJ,IAAb,CAAkBQ,OAAOkG,UAAP,CAAlB,EAAsCxH,EAAEuD,MAAF,CAASqC,IAA/C,EAAqD5F,EAAEuD,MAAF,CAASmC,MAA9D;AAEA;AACD;AACK;AACP,CAnBD;;AAqBA;;;;;;AAMA,SAASzF,MAAT,CAAkB8J,KAAlB,EAAyBK,MAAzB,EAAkC;AAC9B,KAAID,UAAJ;AACA,KAAI1G,YAAJ;AACA,KAAI4G,IAAIvK,aAAKmB,QAAb;AACAmJ,UAASA,UAAU,EAAEzG,SAAS,KAAX,EAAkBD,YAAY,KAA9B,EAAqCH,QAAQ+G,SAA7C,EAAnB;;AAEA,KAAG;AACD7G,QAAM4G,EAAEE,WAAF,CAAe,aAAf,CAAN;AACA9G,MAAI+G,eAAJ,CAAqBT,KAArB,EAA4BK,OAAOzG,OAAnC,EAA4CyG,OAAO1G,UAAnD,EAA+D0G,OAAO7G,MAAtE;AACJ,EAHE,CAGF,OAAMvD,CAAN,EAAQ;AACJyD,QAAM4G,EAAEI,iBAAF,CAAoBpK,EAAE0J,KAAtB,CAAN;AACDtG,MAAII,YAAJ,GAAmB,CAACuG,OAAOzG,OAA3B;;AAEIF,MAAIiH,WAAJ,GAAkB,CAACN,OAAO1G,UAA1B;;AAED,MAAG,QAAO0G,OAAO7G,MAAd,MAAyB,QAA5B,EAAqC;;AAEvCE,OAAIF,MAAJ,GAAa6G,OAAO7G,MAApB;AACD;AACH;;AAEE,QAAOE,GAAP;AACH;;AAED,SAASkH,mBAAT,CAA6BvJ,MAA7B,EAAqCwJ,GAArC,EAAyC;;AAEtC,KAAGxJ,OAAO+B,iBAAV,EAA4B;;AAE3B/B,SAAO6B,kBAAP,GAA4B,IAA5B;AACA;;AAED,KAAG7B,OAAO6B,kBAAV,EAA6B;;AAE5B;AACA,MAAMoG,UAAUxH,uBAAuBT,MAAvB,CAAhB;;AAEA,MAAMsF,OAAOrE,YAAYgH,OAAZ,CAAb;;AAEA9I,eAAaqG,OAAb,CAAqByC,OAArB,EAA8B3C,IAA9B;;AAEA0C,kBAAgBE,QAAhB,GAA2BD,OAA3B;;AAEAD,kBAAgBzC,KAAhB,GAAwBD,IAAxB;;AAEA5B,mBAAiBuC,SAAjB,GAA6B,IAA7B;;AAEAvC,mBAAiB6B,KAAjB,GAAyBD,IAAzB;;AAEAkE,MAAIC,UAAJ,CAAe/F,gBAAf;AACD;;AAEQ,KAAG1D,OAAO8B,aAAP,KAAyB,IAA5B,EAAiC;;AAErC,MAAI4H,OAAO,IAAX;;AAES,MAAG,CAAC,+BAAkB1B,gBAAgBzC,KAAlC,CAAD,IACQpG,YADX,EACwB;AACnBuK,UAAOtI,cAAcjC,aAAagC,OAAb,CAAqB6G,gBAAgBzC,KAArC,CAAd,CAAP;AACb;;AAED,MAAGmE,QACAA,gBAAgB3K,MADhB,IAEqB2K,KAAKjE,KAF7B,EAEmC;AAClBS,eAAYwD,KAAKjE,KAAjB;AACA,QAAKkE,0BAAL;AACL;AACP;;AAEV,KAAG,CAAC3J,OAAO0B,OAAP,CAAeC,OAAnB,EAA2B;;AAE1B,MAAG,OAAO3B,OAAO0B,OAAP,CAAeE,YAAtB,KAAuC,QAAvC,IACC5B,OAAO0B,OAAP,CAAeE,YAAf,CAA4BsB,MAA5B,IAAsC,CAD1C,EAC4C;;AAE3CxE,gBAAKkL,cAAL,GAAsB,2CAA8B5J,MAA9B,CAAtB;;AAEAtB,gBAAKmL,QAAL,GAAgB,qCAAwBL,GAAxB,CAAhB;AACA;AACD,EATD,MASK;;AAEJ,MAAG,OAAOxJ,OAAO0B,OAAP,CAAeE,YAAtB,KAAuC,QAAvC,IACC5B,OAAO0B,OAAP,CAAeE,YAAf,CAA4BsB,MAA5B,IAAsC,CAD1C,EAC4C;;AAE3C,OAAGxE,aAAKoL,gBAAR,EAAyB;AACxBpL,iBAAKmB,QAAL,CAAckB,eAAd,CAA8B+I,gBAA9B,CAA+C,OAA/C,EAAwD,2CAA8B9J,MAA9B,CAAxD,EAA+F,KAA/F;AACAtB,iBAAKmB,QAAL,CAAciK,gBAAd,CAA+B,OAA/B,EAAwC,qCAAwBN,GAAxB,CAAxC,EAAsE,KAAtE;AACA,IAHD,MAGK;AACJ9K,iBAAKmB,QAAL,CAAckB,eAAd,CAA8BgJ,WAA9B,CAA0C,SAA1C,EAAqD,2CAA8B/J,MAA9B,CAArD;AACAtB,iBAAKmB,QAAL,CAAckK,WAAd,CAA0B,SAA1B,EAAqC,qCAAwBP,GAAxB,CAArC,EAAmE,KAAnE;AACA;AACD;AACD;AAGF;;AAED,IAAMnD,OAAO,SAAPA,IAAO,CAASjC,GAAT,EAAa;;AAExB,MAAKN,GAAL,GAAW,iBAAS;;AAEnB;;;;;;AAOM,MAAI0C,mBAAJ;;AAEA,MAAIC,iBAAJ;;AAEA,MAAMuD,eAAgB,oBAAoB1K,SAArB,IAAoCM,SAAS,CAAlE;;AAEK;AACX,MAAGoK,YAAH,EAAgB;AACf,OAAG,OAAO1K,UAAU2K,KAAjB,IAA0B,UAA7B,EAAwC;AACvC3K,cAAU2K,KAAV;AACA;AACD;;AAEK,MAAG;;AAER3K,aAAUkG,OAAV,CAAkBpB,GAAlB,EAAuBW,cAAcmF,KAAd,CAAvB;AAEA,GAJK,CAIL,OAAMtL,CAAN,EAAQ;;AAER;;AAEA,OAAG2B,kBAAkB6D,GAAlB,CAAH,EAA0B;AACzB;AACAoC,iBAAa9H,aAAKsI,IAAL,CAAUC,OAAV,CAAkB7C,GAAlB,CAAb;;AAEAqC,eAAW/H,aAAKsI,IAAL,CAAUC,OAAV,CAAkB,GAAlB,EAAuBT,UAAvB,CAAX;;AAEA9H,iBAAKsI,IAAL,GAAYtI,aAAKsI,IAAL,CAAUzF,OAAV,CAAkB7C,aAAKsI,IAAL,CAAUxF,SAAV,CAAoBgF,UAApB,EAAgCC,QAAhC,CAAlB,EAA6D,EAA7D,CAAZ;AACA;;AAED,OAAG/H,aAAKsI,IAAL,KAAc,EAAjB,EAAoB;;AAEnBtI,iBAAKsI,IAAL,GAAe5C,GAAf,WAAwBW,cAAcmF,KAAd,CAAxB;AAEA,IAJD,MAIK;;AAEJxL,iBAAKsI,IAAL,IAAgB5C,GAAhB,WAAyBW,cAAcmF,KAAd,CAAzB;AAEA;;AAED3J,qBAAkB6D,GAAlB,IAAyB,CAAzB;AACA;;AAEK,MAAG4F,YAAH,EAAgB;AACrB,OAAG,OAAO1K,UAAU6K,MAAjB,IAA2B,UAA9B,EAAyC;AACxC7K,cAAU6K,MAAV;AACA;AACD;;AAEQ,SAAO/F,GAAP;AACH,EA3DP;;AA6DA,MAAKR,GAAL,GAAW,YAAM;;AAEhB,MAAI4C,mBAAJ;AAAA,MAAgBC,iBAAhB;AAAA,MAA0BC,eAA1B;;AAEA;;AAEA,MAAG;;AAEF,UAAOtF,cAAc9B,UAAU6B,OAAV,CAAkBiD,GAAlB,CAAd,KAAyC,IAAhD;AAEA,GAJD,CAIC,OAAMxF,CAAN,EAAQ;;AAER,OAAG2B,kBAAkB6D,GAAlB,CAAH,EAA0B;;AAEzBoC,iBAAa9H,aAAKsI,IAAL,CAAUC,OAAV,CAAkB7C,GAAlB,CAAb;;AAEAqC,eAAW/H,aAAKsI,IAAL,CAAUC,OAAV,CAAkB,GAAlB,EAAuBT,UAAvB,CAAX;;AAEAE,aAAUhI,aAAKsI,IAAL,CAAUxF,SAAV,CAAoBgF,UAApB,EAAgCC,QAAhC,CAAD,CAA4CS,KAA5C,CAAkD,KAAlD,KAA4D,CAAC,CAAD,EAAI,CAAJ,CAArE;;AAEA,WAAO9F,cAAcsF,OAAO,CAAP,CAAd,KAA4B,IAAnC;AACA;;AAED,UAAO,IAAP;AAEA;AACD,EA1BD;;AA4BA,MAAK0D,GAAL,GAAW,YAAM;;AAEf,MAAI5D,mBAAJ;;AAEA,MAAIC,iBAAJ;AACA;;AAEA,MAAG;;AAEF,UAAOnH,UAAU+K,UAAV,CAAqBjG,GAArB,CAAP;AAEA,GAJD,CAIC,OAAMxF,CAAN,EAAQ;;AAER,OAAG2B,kBAAkB6D,GAAlB,CAAH,EAA0B;;AAEzB;AACAoC,iBAAa9H,aAAKsI,IAAL,CAAUC,OAAV,CAAkB7C,GAAlB,CAAb;;AAEAqC,eAAW/H,aAAKsI,IAAL,CAAUC,OAAV,CAAkB,GAAlB,EAAuBT,UAAvB,CAAX;;AAEA9H,iBAAKsI,IAAL,GAAYtI,aAAKsI,IAAL,CAAUzF,OAAV,CAAkB7C,aAAKsI,IAAL,CAAUxF,SAAV,CAAoBgF,UAApB,EAAgCC,QAAhC,CAAlB,EAA6D,EAA7D,CAAZ;;AAEA,WAAOlG,kBAAkB6D,GAAlB,CAAP;AACA;;AAED;AACA;AACF,EA3BD;;AA6BA,QAAO,IAAP;AACD,CAzHD;;IA2HMkG,U;AAEL,uBAAc;AAAA;;AAEH,OAAKC,WAAL,GAAmB,EAAnB;;AAEA3H,yBAAuB4H,kBAAvB,GAA4C,EAA5C;;AAEA5H,yBAAuBwC,kBAAvB,GAA4C,EAA5C;AACJ;;;;+CAE4B;;AAExBrF,4BAAyB,IAAzB;AACJ;;;4CAEyB;;AAErB,UAAOA,sBAAP;AACJ;;;gCAEa0K,U,EAAY;;AAElB,OAAG,OAAOA,UAAP,KAAsB;AACrB,kCADJ,EACoC;;AAEhC,YAAO,KAAKF,WAAL,CAAiB7F,IAAjB,CAAsB+F,UAAtB,CAAP;AACH;;AAED,SAAM,IAAIC,KAAJ,CAAU,mFAAV,CAAN;AAEP;;;kCAEe;;AAER,UAAQ,KAAKH,WAAL,CAAiBrH,MAAjB,GAA0B,CAAlC;AAEP;;;+BAEYyH,U,EAAYnB,G,EAAK;;AAE5B,OAAG,+BAAkBxJ,MAAlB,CAAH,EAA6B;;AAElCA,aAAS,oBAAO2K,UAAP,EAAmBlJ,aAAnB,CAAT;;AAEA8H,wBAAoB5G,KAApB,CAA0B,IAA1B,EAAgC,CAAC3C,MAAD,EAASwJ,GAAT,CAAhC;AACM;;AAEK,OAAG9K,aAAKmB,QAAL,CAAciK,gBAAjB,EAAkC;AAC9B;AACA,QAAG9J,OAAO+B,iBAAV,EAA4B;AACxBrD,kBAAKoL,gBAAL,CAAsB,SAAtB,EAAiC9B,eAAjC,EAAkD,KAAlD;AACH;;AAEDtJ,iBAAKmB,QAAL,CAAciK,gBAAd,CAA+B,aAA/B,EAA8CpB,YAA9C,EAA4D,KAA5D;AAEH,IARD,MAQM,IAAGhK,aAAKmB,QAAL,CAAckK,WAAjB,EAA6B;AAC/B;;AAEA,QAAG/J,OAAO+B,iBAAV,EAA4B;AACxBrD,kBAAKmB,QAAL,CAAckK,WAAd,CAA0B,WAA1B,EAAuC/B,eAAvC;AACH;;AAEDtJ,iBAAKmB,QAAL,CAAckK,WAAd,CAA0B,eAA1B,EAA2CrB,YAA3C;AACH;AAER;;;kCAEe/C,K,EAAO;;AAElB,OAAGlG,YAAIC,IAAJ,CAASU,SAAT,EAAoBuF,KAApB,CAAH,EAA8B;;AAE1B,WAAOvF,UAAUuF,KAAV,CAAP;AACH;;AAED,UAAO,EAAP;AACV;;;2BAEQA,K,EAAOkB,Q,EAAU+D,qB,EAAuB;;AAEnC,OAAGnL,YAAIC,IAAJ,CAASU,SAAT,EAAoBuF,KAApB,CAAH,EAA8B;;AAE1B,QAAG,eAAevF,UAAUuF,KAAV,CAAf,IACK,OAAOkB,SAAS5D,SAAhB,IAA6B,WADrC,EACiD;AAC7C,SAAG,CAAC/C,OAAOyF,KAAP,CAAJ,EAAkB;AAAE;;AAEhB,YAAM,IAAI+E,KAAJ,CAAU,sDAAV,CAAN;;AAEA;AACH;;AAED7D,cAAS5D,SAAT,GAAqB7C,UAAUuF,KAAV,EAAiB1C,SAAtC;AACA4D,cAASxD,cAAT,GAA0BjD,UAAUuF,KAAV,EAAiBtC,cAA3C;AACAwD,cAASiC,iBAAT,GAA6B1I,UAAUuF,KAAV,EAAiBmD,iBAA9C;AACA1I,eAAUuF,KAAV,IAAmBkB,QAAnB;AACH;AACJ,IAhBD,MAgBK;;AAEDA,aAASiC,iBAAT,GAA6B,EAA7B;AACAjC,aAAS5D,SAAT,GAAqB,CACb,CAAC,CAAC2H,qBAAF,GACAA,qBADA,GAEK,IAHQ,CAArB;AAKA/D,aAASxD,cAAT,GAA0B,CAA1B;AACAjD,cAAUuF,KAAV,IAAmBkB,QAAnB;AACA1G,cAAUuE,IAAV,CAAeiB,KAAf;AACH;;AAED,UAAO,IAAP;AACP;;;wBAEKkF,Q,EAAU;;AAER5K,YAASyE,IAAT,CAAcmG,QAAd;AACP;;;mCAEgBC,K,EAAOD,Q,EAAU;;AAE7B,OAAMlF,QAAQmF,MAAMC,QAAN,EAAd;;AAEA,OAAG,CAAC,+BAAkB3K,UAAUuF,KAAV,CAAlB,CAAJ,EAAwC;;AAEpC,QAAG,OAAOkF,QAAP,IAAmB,UAAtB,EAAiC;AAC7B3K,YAAOyF,KAAP,IAAgBmF,KAAhB;AACA1K,eAAUuF,KAAV,EAAiBmD,iBAAjB,CAAmCpE,IAAnC,CAAwCmG,QAAxC;AACH;AACJ;AACL;;;qCAEkBC,K,EAAOD,Q,EAAU;;AAE/B,OAAMlF,QAAQmF,MAAMC,QAAN,EAAd;;AAEA,OAAG,CAAC,+BAAkB3K,UAAUuF,KAAV,CAAlB,CAAJ,EAAwC;AACpC,QAAG,OAAOkF,QAAP,IAAmB,UAAtB,EAAiC;;AAE7B,SAAM9E,MAAM3F,UAAUuF,KAAV,EAAiBmD,iBAAjB,CAAmC7B,OAAnC,CAA2C4D,QAA3C,CAAZ;AACAzK,eAAUuF,KAAV,EAAiBmD,iBAAjB,CAAmCkC,MAAnC,CAA0CjF,GAA1C,EAA+C,CAA/C;AACH;AACJ;AAEL;;;+BAEYkF,a,EAAe;;AAEvB,OAAGA,cAAcjH,MAAd,IAAwB,SAA3B,EAAqC;AACjC;AACH;;AAED;AACAtF,gBAAK+J,UAAL,CAAgBb,cAAhB,EAAgC,CAAhC;;AAEA,OAAMsD,YAAY,IAAI7E,IAAJ,CAAS4E,cAAchJ,MAAvB,CAAlB;AAAA,OAAkDkJ,UAAU/K,UAAU6K,cAAchJ,MAAxB,CAA5D;;AAEAW,0BAAuBwC,kBAAvB,CAA0ClC,MAA1C,GAAmD,CAAnD;;AAEAN,0BAAuBwC,kBAAvB,CAA0CV,IAA1C,CAA+CuG,aAA/C;;AAEAE,WAAQlI,SAAR,CAAkBC,MAAlB,GAA2B,CAA3B,CAfuB,CAeO;;AAE9BiI,WAAQC,YAAR,GAAuB,CAAC,CAAxB;;AAEAxI,2CAA0B,CAClCuI,OADkC,EAElC,IAFkC,EAGlCD,SAHkC,EAIlCD,aAJkC,CAA1B;AAOJ;;;sCAEmBH,K,EAAOO,Y,EAAc;;AAEpC,OAAG,CAACA,YAAJ,EAAiB;AACb;AACH;;AAED,OAAMjF,aAAa0E,MAAMC,QAAN,EAAnB;AACA,OAAM5E,gBAAgB,EAAtB;AACA,OAAMgF,UAAU,KAAKG,eAAL,CAAqBlF,UAArB,CAAhB;AACA,OAAM8E,YAAY,IAAI7E,IAAJ,CAASD,UAAT,CAAlB;;AAEI,WAAOiF,YAAP;;AAEI,SAAK,MAAL;AACI,SAAGP,MAAMS,OAAN,EAAH,EAAmB;;AAEf,QAAEJ,QAAQ9H,cAAV;;AAEA8C,oBAAcC,UAAd,IAA4BxD,wCAA0B,CAC1EuI,OAD0E,EAE1E,IAF0E,EAG1ED,SAH0E,EAI1E,IAJ0E,CAA1B,CAA5B;;AAOA;AACAxM,mBAAK+J,UAAL,CAAgB5C,aAAayB,IAAb,CAAkB,IAAlB,EAAwBnB,aAAxB,CAAhB,EAAwD,CAAxD;;AAEA,aAAO,IAAP;AACH;AACL;AACA,SAAK,MAAL;AACI,SAAG2E,MAAMU,OAAN,EAAH,EAAmB;;AAEf,QAAEL,QAAQ9H,cAAV;;AAEA8C,oBAAcC,UAAd,IAA4BxD,wCAA0B,CAC1EuI,OAD0E,EAE1E,IAF0E,EAG1ED,SAH0E,EAI1E,IAJ0E,CAA1B,CAA5B;;AAOA;AACAxM,mBAAK+J,UAAL,CAAgB5C,aAAayB,IAAb,CAAkB,IAAlB,EAAwBnB,aAAxB,CAAhB,EAAwD,CAAxD;;AAEA,aAAO,IAAP;AAEH;AACL;AAtCJ;;AAyCA,UAAO,KAAP;AACR;;;gDAE4B;;AAE5B,OAAG,+BAAkBnG,MAAlB,CAAH,EAA6B;;AAE5B,WAAO,KAAP;AACA;;AAED,OAAMiI,UAAUxH,uBAAuBT,MAAvB,CAAhB;;AAEN,OAAMsF,OAAOrE,YAAYgH,OAAZ,CAAb;;AAEA9I,gBAAakL,UAAb,CAAwBpC,OAAxB;;AAEA9I,gBAAakL,UAAb,CAAwB/E,IAAxB;;AAEA,UAAO,IAAP;AACM;;;4CAEyB;;AAErB,OAAMH,eAAevC,uBAAuBwC,kBAA5C;;AAEA,qBAAKD,YAAL,EAAmB,UAACnC,MAAD,EAASkC,KAAT,EAAmB;;AAElC,QAAIgG,kBAAJ;;AAEA,SAAIvF,KAAJ,IAAavF,SAAb,EAAuB;AACnB,SAAGX,YAAIC,IAAJ,CAASU,SAAT,EAAoBuF,KAApB,CAAH,EAA8B;;AAE1BuF,kBAAY,IAAI7E,IAAJ,CAASV,KAAT,CAAZ;;AAEAvF,gBAAUuF,KAAV,EAAiBjG,IAAjB,CAAsBsD,MAAtB,EAA8BkI,UAAUtH,GAAV,EAA9B;AACH;AACJ;AAEJ,IAbD,EAaGhB,sBAbH;AAcJ;;;mCAEsB;;AAEtB,UAAOuE,qCAAP;AACA;;;yBAEMnE,M,EAAQ;;AAEV,OAAIyI,gBAAgB,IAApB;;AAEA;;AAEA,OAAMC,uBAAuB,SAAvBA,oBAAuB,CAACtL,SAAD,EAAYuL,UAAZ,EAAwB3I,MAAxB,EAAgC4I,SAAhC,EAA8C;;AAElF,QAAIjG,cAAJ;AAAA,QAAWuF,YAAY,IAAvB;;AAEAtI,2BAAuBwC,kBAAvB,CAA0CV,IAA1C,CAA+C1B,MAA/C;;AAEA,SAAI2C,KAAJ,IAAavF,SAAb,EAAuB;AACtB,SAAGX,YAAIC,IAAJ,CAASU,SAAT,EAAoBuF,KAApB,CAAH,EAA8B;;AAE7BuF,kBAAY,IAAI7E,IAAJ,CAASV,KAAT,CAAZ;;AAEA/C,8CAA0B,CACDxC,UAAUuF,KAAV,CADC,EAEDgG,WAAW7I,QAFV,EAGDoI,SAHC,EAIDlI,MAJC,CAA1B;AAMA;AACD;;AAED,WAAOsD,aAAP;AACD,IArBQ;;AAuBA,OAAMuF,4BAA4BH,qBAAqBpE,IAArB,CAA0B,IAA1B,EAAgClH,SAAhC,EAA2C,IAA3C,CAAlC;;AAEA,OAAM0L,WAAW;AACT;;;;;;;;;AASAC,0BAVS,kCAUc5D,OAVd,EAUuB;;AAE5B,YAAO0D,0BAA0BvE,IAA1B,CAA+B,IAA/B,EAAqCa,OAArC,CAAP;AACH;AAbQ,IAAjB;;AAgBA,OAAM6D,iBAAiB,KAAKC,aAAL,EAAvB;;AAGA;AACA,OAAG,EAAEjJ,OAAOgB,MAAP,IAAiBxD,gBAAnB,CAAH,EAAwC;;AAEpC;AACH;;AAED;AACA,OAAGwL,cAAH,EAAkB;;AAEd;AACAP,oBAAgB,KAAKlB,WAAL,CAAiB2B,MAAjB,CACIL,yBADJ,EAEEM,WAFF,CAEc,UAACC,KAAD,EAAQ3B,UAAR;AAAA,YAAuBA,WAAWnD,IAAX,CAAgB,IAAhB,EACjD8E,KADiD,CAAvB;AAAA,KAFd,CAAhB;AAMH,IATD,MASM;;AAEFX,oBAAgBC,oBAAhB;AACH;;AAED;AACAhN,gBAAK+J,UAAL,CAAgBb,cAAhB,EAAgC,CAAhC;;AAEA;AACA;AACA;AACA;;AAEA,OAAG,CAAC,+BAAkB6D,aAAlB,CAAJ,EAAqC;;AAEjCA,kBAAc9I,KAAd,CAAoBqJ,iBAAiBF,QAAjB,GAA4B,IAAhD,EAAsD,CAAC9I,MAAD,EAASsD,aAAT,CAAtD;AAEH;AACX;;;qCAEkB+F,K,EAAM;;AAExB7L,oBAAiB6L,KAAjB,IAA0B,EAACC,aAAY,EAAb,EAA1B;AACA;;;sCAEmBtL,E,EAAIuL,M,EAAO;;AAE9B,OAAG,CAAE,+BAAkB/L,iBAAiBQ,EAAjB,CAAlB,CAAL,EAA6C;AAC3CR,qBAAiBQ,EAAjB,EAAqBsL,WAArB,CAAiC5H,IAAjC,CACC6H,MADD;AAGD;AAED;;;6BAEU5G,K,EAAO;;AAEP,OAAIkB,iBAAJ;AAAA,OAAciE,cAAd;AAAA,OAAqB5F,cAArB;;AAEA,OAAG,CAAC,+BAAkB9E,UAAUuF,KAAV,CAAlB,CAAJ,EAAwC;AACpC;;AAEAkB,eAAWzG,UAAUuF,KAAV,CAAX;AACAmF,YAAQ5K,OAAOyF,KAAP,CAAR;AACAkB,aAASiC,iBAAT,CAA2B5F,MAA3B,GAAoC,CAApC;AACA2D,aAASiC,iBAAT,GAA6B,IAA7B;AACAjC,aAASxD,cAAT,GAA0B,CAAC,CAA3B;AACAwD,aAAS5D,SAAT,CAAmBC,MAAnB,GAA4B,CAA5B;AACA2D,aAAS5D,SAAT,GAAqB,IAArB;;AAEA;AACA,WAAO7C,UAAUuF,KAAV,CAAP;AACAkB,eAAW,IAAX;;AAEA,WAAO3G,OAAOyF,KAAP,CAAP;AACAmF,YAAQ,IAAR;;AAEA5F,YAAQ/E,UAAU8G,OAAV,CAAkBtB,KAAlB,CAAR;;AAEA,QAAGT,SAAS,CAAC,CAAb,EAAe;AACX/E,eAAU6K,MAAV,CAAiB9F,KAAjB,EAAwB,CAAxB;AACH;AACJ;AACX;;;;;;QAIMoF,U,GAAAA,U;QAAYjE,I,GAAAA,I;;;;;;;;;;;;;;;;;;;;;ACzlCrB;;AACA;;AACA;;AAGE,IAAImG,YAAY,IAAhB;;AAEA,IAAMC,cAAc,SAAdA,WAAc,GAAU;;AAE7B,KAAGD,cAAc,IAAjB,EAAsB;;AAErBA,cAAY,IAAIlC,sBAAJ,EAAZ;AACA;;AAED,QAAOkC,SAAP;AAEA,CATD;;AAWA,IAAME,qBAAqB,SAArBA,kBAAqB,MAAO;AAChC,KAAG,oBAAoB3N,MAAvB,EAA8B;AAC7B,SAAOA,OAAO4N,cAAP,CAAsBC,GAAtB,CAAP;AACA,EAFD,MAEM,IAAG,eAAeA,GAAlB,EAAsB;AAC3B,MAAG,CAAEnN,YAAIC,IAAJ,CAASkN,GAAT,EAAc,WAAd,CAAL,EAAiC;AAChC,UAAQA,IAAIC,SAAZ;AACA;AACD,EAJK,MAIA,IAAG,iBAAiBD,GAApB,EAAwB;AAC7B,MAAG,CAAEnN,YAAIC,IAAJ,CAASkN,GAAT,EAAc,aAAd,CAAL,EAAmC;AAClC,UAAOA,IAAIE,WAAJ,CAAgBhO,SAAvB;AACA;AACD;AACD,QAAO8N,GAAP;AACD,CAbD;;AAeA,IAAMzF,YAAY,SAAZA,SAAY,CAAStE,EAAT,EAAauE,SAAb,EAAwBC,UAAxB,EAAoC;;AAE3C,KAAMsE,aAAac,aAAnB;;AAEA,QAAOd,WAAWoB,cAAX,CAA0BlK,EAA1B,EAA8BuE,SAA9B,EAAyCC,UAAzC,CAAP;AACJ,CALP;;AAOA,IAAM2F,uBAAuB,SAAvBA,oBAAuB,CAASrB,UAAT,EAAqBsB,MAArB,EAA6B;;AAGzD,QAAO,YAAU;AACJ,MAAI9B,gBAAJ;AACA,MAAIpI,aAAJ;AACA,MAAMmK,WAAWC,UAAUjK,MAAV,GAAmBiK,UAAU,CAAV,CAAnB,GAAkC,IAAnD;;AAEA,MAAGF,UAAU,mBAAb,EAAiC;;AAE5C,UAAOtB,WAAWyB,gBAAX,CAA4B,IAA5B,EAAkCF,QAAlC,CAAP;AACA;;AAEW,MAAGD,UAAU,qBAAb,EAAmC;;AAE9C,UAAOtB,WAAW0B,kBAAX,CAA8B,IAA9B,EAAoCH,QAApC,CAAP;AACA;;AAEW,MAAGD,UAAU,UAAb,EAAwB;;AAEnC,OAAItH,QAAQ,KAAKoF,QAAL,EAAZ;AAAA,OAA6Bb,KAA7B;AACAnH,UAAO,IAAIsD,gBAAJ,CAASV,KAAT,CAAP;AACAuE,WAAQnH,KAAKa,GAAL,EAAR;AACAb,UAAO,IAAP;;AAEA,OAAGmH,UAAU,IAAb,EAAkB;;AAEjBiB,cAAUQ,WAAWL,eAAX,CAA2B3F,KAA3B,CAAV;;AAEAuE,YAASiB,QAAQlI,SAAR,CAAkBC,MAAlB,GAA2BiI,QAAQlI,SAAR,CAAkB,CAAlB,CAA3B,GAAkD,IAA3D;AAEA,IAND,MAMM,IAAG,OAAOiK,QAAP,KAAoB,QAAvB,EAAgC;;AAErC,QAAGhD,iBAAiBnL,MAApB,EAA2B;;AAE1B,SAAGU,YAAIC,IAAJ,CAASwK,KAAT,EAAgBgD,QAAhB,CAAH,EAA6B;;AAE5BhD,cAAQA,MAAMgD,QAAN,CAAR;AACA;AACD;AACD;;AAED,UAAOhD,KAAP;AACA;;AAEW,MAAG+C,UAAU,SAAb,EAAuB;;AAElC,OAAItH,eAAJ;AAAA,OAAWT,cAAX;;AAEA,OAAGS,UAASzF,MAAZ,EAAmB;;AAElB,WAAOA,OAAOyF,MAAP,CAAP;AAEA;;AAED5C,UAAO,IAAIsD,gBAAJ,CAAS,KAAK0E,QAAL,EAAT,CAAP;;AAEAhI,QAAKqH,GAAL;;AAEA,UAAQrH,OAAO4C,SAAQ,IAAvB;AACA;;AAEW,MAAGsH,UAAU,YAAb,EAA0B;;AAErC,UAAOtB,WAAW2B,UAAX,CAAsB,KAAKvC,QAAL,EAAtB,CAAP;AACA;;AAEW,MAAGkC,UAAU,SAAb,EAAuB;;AAElC,OAAG,+BAAkBC,QAAlB,CAAH,EAA+B;AAC9B;AACA;;AAED,UAAOvB,WAAW4B,YAAX,CAAwB;AAC9BvJ,YAAOiJ,MADuB;AAE9BhL,YAAO,KAAK8I,QAAL,EAFuB;AAG9BtH,gBAAWyJ;AAHmB,IAAxB,CAAP;AAKA;;AAEW,MAAGD,UAAU,gBAAb,EAA8B;;AAEzC,UAAO,EAAP;AACA;;AAEW,MAAGA,UAAU,gBAAb,EAA8B;;AAEzC,UAAO,IAAP;AACA;;AAEW,MAAGA,UAAU,SAAb,EAAuB;;AAElC9B,aAAUQ,WAAWL,eAAX,CAA2B,KAAKP,QAAL,EAA3B,CAAV;;AAEA,UAAQI,QAAQ9H,cAAR,IAA0B,CAAlC;AACA;;AAEW,MAAG4J,UAAU,cAAb,EAA4B;;AAEvC,UAAOtB,WAAW6B,QAAX,CAAoB,KAAKzC,QAAL,EAApB,EAAqCmC,QAArC,CAAP;AACA;;AAEW,MAAGD,UAAU,SAAb,EAAuB;;AAElC9B,aAAUQ,WAAWL,eAAX,CAA2B,KAAKP,QAAL,EAA3B,CAAV;;AAEA,UAAQI,QAAQ9H,cAAR,KAA2B8H,QAAQlI,SAAR,CAAkBC,MAAlB,GAA2B,CAA9D;AACA;;AAEW,MAAG+J,UAAU,MAAb,EAAoB;;AAE/B,UAAOtB,WAAW8B,mBAAX,CAA+B,IAA/B,EAAqCR,MAArC,CAAP;AAEA;;AAEW,MAAGA,UAAU,MAAb,EAAoB;;AAE/B,UAAOtB,WAAW8B,mBAAX,CAA+B,IAA/B,EAAqCR,MAArC,CAAP;AAEA;AACQ,EArHV;AAuHA,CA1HD;;AA4HA,IAAMS,wBAAwB,SAAxBA,qBAAwB,CAAS/B,UAAT,EAAqBY,MAArB,EAA6B;;AAE1D,KAAG,EAAEA,kBAAkBxN,MAApB,CAAH,EAA+B;;AAE9B,QAAM,IAAI8E,SAAJ,0EAAoF0I,MAApF,yCAAoFA,MAApF,SAAN;AACA;;AAED,QAAO,UAAS7C,IAAT,EAAeiE,cAAf,EAA8B;;AAEnC;;AAED,MAAM3M,KAAK,KAAK4M,KAAL,EAAX;;AAEA,MAAIC,eAAe,CAAnB;;AAEAlC,aAAWmC,mBAAX,CAA+B9M,EAA/B,EAAmCuL,MAAnC;;AAEA,MAAGA,OAAOwB,gBAAP,YAAmCC,KAAtC,EAA4C;;AAE3C,qBAAKzB,OAAOwB,gBAAZ,EAA8B,UAASE,UAAT,EAAoB;;AAEjDJ,oBAAgBK,OAAOC,eAAOC,QAAP,CAAgBH,UAAhB,EAA4BvE,IAA5B,CAAP,CAAhB;AAEA,IAJD;;AAMA,OAAG,CAACmE,YAAJ,EAAiB;;AAEhB,UAAM,IAAIhK,SAAJ,uCAAkD0I,OAAO/H,IAAzD,OAAN;AACG;AAEJ,GAbD,MAaK;AACJ,OAAG,CAAC2J,eAAOC,QAAP,CAAgB7B,OAAOwB,gBAAvB,EAAyCrE,IAAzC,CAAJ,EAAmD;;AAElD,UAAM,IAAI7F,SAAJ,uCAAkD0I,OAAO/H,IAAzD,OAAN;AAEA;AACD;;AAED,SAAOmH,WAAW0C,MAAX,CAAkB;AACxBrK,WAAOhD,EADiB;AAExByD,eAAW8H,OAAO/H,IAFM;AAGxBD,cAAUoJ,kBAAkB,IAHJ;AAIxBlK,eAAWiG;AAJa,GAAlB,CAAP;AAMA,EArCD;AAsCA,CA7CD;;AA+CA,IAAM4E,kBAAkB,SAAlBA,eAAkB,CAASzD,QAAT,EAAmB;;AAE1C,KAAMc,aAAac,aAAnB;;AAEAd,YAAW4C,KAAX,CAAiB1D,QAAjB;AAEA,CAND;;AAQA,IAAM2D,2BAA2B,SAA3BA,wBAA2B,GAAW;;AAE3C,KAAM7C,aAAac,aAAnB;;AAEA,QAAOd,WAAW8C,uBAAX,EAAP;AAEA,CAND;;AAQA,IAAMC,wBAAwB,SAAxBA,qBAAwB,CAAS7D,QAAT,EAAmBrB,GAAnB,EAAuB;;AAGpDA,KAAImF,KAAJ,GAAY9D,QAAZ;AAEA,CALD;;AAOA,IAAM+D,cAAc,SAAdA,WAAc,CAASjE,UAAT,EAAqBnB,GAArB,EAA0B;;AAE7C,KAAMmC,aAAac,aAAnB;;AAEA,QAAOd,WAAWkD,YAAX,CAAwBlE,UAAxB,EAAoCnB,GAApC,CAAP;AACA,CALD;;AAOA,IAAMsF,oBAAoB,SAApBA,iBAAoB,GAAW;;AAEpC,KAAMnD,aAAac,aAAnB;;AAEAd,YAAWoD,2BAAX;AAEA,CAND;;AAQA,IAAMC,iBAAiB,SAAjBA,cAAiB,GAAW;AACjC;AACA,KAAM3C,QAAQhL,KAAKC,MAAL,GAAc2N,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqC,EAArC,CAAd;;AAEA,KAAMvD,aAAac,aAAnB;;AAEAd,YAAWwD,kBAAX,CAA8B9C,KAA9B;;AAEA,QAAOA,KAAP;AAEA,CAVD;;AAYA,IAAM+C,iBAAiB,SAAjBA,cAAiB,GAAW;;AAEhC,QAAO;AACNC;AADM,EAAP;AAKD,CAPD;;AASA,IAAMC,wBAAwB,SAAxBA,qBAAwB,CAASC,cAAT,EAAyB;;AAEtD,KAAM5D,aAAac,aAAnB;;AAEA;AACA,KAAG;;AAEFd,aAAW6D,aAAX;AAEA,EAJD,CAIC,OAAMC,EAAN,EAAS;;AAET9D,aAAW+D,aAAX,CACCH,cADD;AAIA;AAED,CAjBD;;AAmBA,IAAMI,mBAAmB,SAAnBA,gBAAmB,CAASC,MAAT,EAAiBC,OAAjB,EAA0B;;AAEzC,KAAMC,SAASpD,mBAAmBkD,MAAnB,CAAf;AACA,KAAMjE,aAAac,aAAnB;AACA,KAAIF,SAAS,IAAb;;AAEA,MAAI,IAAMwD,OAAV,IAAqBF,OAArB,EAA6B;AACrC,MAAGpQ,YAAIC,IAAJ,CAASmQ,OAAT,EAAkBE,OAAlB,CAAH,EAA8B;AACzBxD,YAASsD,QAAQE,OAAR,CAAT;AACAD,UAAOC,OAAP,IAAkBrC,sBAAsB/B,UAAtB,EAAkCY,MAAlC,CAAlB;AACJ;AACD;;AAEQ,QAAOqD,MAAP;AACH,CAdP;;AAgBA,IAAMI,mBAAmB,SAAnBA,gBAAmB,CAASJ,MAAT,EAAiBzE,OAAjB,EAA0B8E,eAA1B,EAA2C;;AAE1D,KAAG,OAAO9E,OAAP,KAAmB,UAAtB,EAAiC;AACzC,SAAO,IAAP;AACA;;AAEQ,KAAM2E,SAASpD,mBAAmBkD,MAAnB,CAAf;AACA,KAAMjE,aAAac,aAAnB;AACA,KAAM9G,QAAYiK,OAAO7E,QAAP,EAAlB;AACA,KAAIkC,SAAS,IAAb;;AAEAtB,YAAW6B,QAAX,CAAoB7H,KAApB,EAA2BwF,OAA3B,EAAoC8E,eAApC;;AAEA,KAAMC,UAAU,CACf,mBADe,EAEf,qBAFe,EAGf,UAHe,EAIf,YAJe,EAKf,gBALe,EAMf,SANe,EAOf,SAPe,EAQf,cARe,EASf,MATe,EAUf,MAVe,EAWf,SAXe,EAYf,SAZe,CAAhB;;AAeA,MAAI,IAAIC,IAAE,CAAV,EAAaA,IAAID,QAAQhN,MAAzB,EAAiCiN,GAAjC,EAAqC;AAC7ClD,WAASiD,QAAQC,CAAR,CAAT;;AAEAL,SAAO7C,MAAP,IAAiBD,qBAAqBrB,UAArB,EAAiCsB,MAAjC,CAAjB;AACA;AACD,CAjCD;;QAmCO9F,S,GAAAA,S;QAAWiI,c,GAAAA,c;QAAgBJ,c,GAAAA,c;QAAgBN,qB,GAAAA,qB;QAAuBE,W,GAAAA,W;QAAaE,iB,GAAAA,iB;QAAmBQ,qB,GAAAA,qB;QAAuBK,gB,GAAAA,gB;QAAkBK,gB,GAAAA,gB;QAAkB1B,e,GAAAA,e;QAAiBE,wB,GAAAA,wB;;;;;;;;;;;;;;;;;;;ACpVvL;;IAAY4B,U;;AACZ;;AACA;;AACA;;;;AAEC;;;;;;;;;;;;;AAcD,IAAMnB,WAAW,SAAXA,QAAW,GAAU;;AAEvB,WAAO,oBAAP;AACH,CAHD;;AAKA,IAAMoB,YAAY,SAAZA,SAAY,CAASC,SAAT,EAAoBC,gBAApB,EAAsCN,eAAtC,EAAsD;;AAEpE,aAASO,MAAT,GAAwB;AAAA,0CAALC,IAAK;AAALA,gBAAK;AAAA;;AACpBC,sBAAM/N,KAAN,CAAY,IAAZ,YAAsB8N,IAAtB;AACH;;AAED,QAAME,cAAc,IAAIH,MAAJ,CAAWF,SAAX,CAApB;;AAEAF,eAAWJ,gBAAX,CAA4BW,WAA5B,EAAyCJ,gBAAzC,EAA2DN,eAA3D;;AAEA,WAAOU,WAAP;AACH,CAXD;;AAaA,IAAMC,qBAAqB,SAArBA,kBAAqB,CAASf,OAAT,EAAiB;AACxC,aAAS1H,OAAT,GAAyB;AAAA,2CAALsI,IAAK;AAALA,gBAAK;AAAA;;AACjBI,uBAAOlO,KAAP,CAAa,IAAb,YAAuB8N,IAAvB;AACP;;AAED,QAAMK,eAAe,IAAI3I,OAAJ,CAAYiI,WAAWpB,cAAX,EAAZ,CAArB;;AAEA,WAAOoB,WAAWT,gBAAX,CAA4BmB,YAA5B,EAA0CjB,OAA1C,CAAP;AACH,CARD;;AAUA,IAAMkB,yBAAyB,SAAzBA,sBAAyB,GAAU;;AAErCX,eAAWtB,iBAAX;AACH,CAHD;;AAKA,IAAM3H,YAAY,SAAZA,SAAY,CAAS0D,QAAT,EAAkB;;AAEhC,WAAOuF,WAAWjJ,SAAX,CACH,YAAiB;AACb0D;AACH,KAHE,EAGA,UAAS3K,MAAT,EAAiBkE,GAAjB,EAAqB;;AAEhB,aAAKM,IAAL,CAAUxE,OAAOkE,GAAP,CAAV;AACX,KANM,EAMJ,IANI,CAAP;AAOH,CATD;;AAWA,IAAM4M,mBAAmB,SAAnBA,gBAAmB,CAASnG,QAAT,EAAmB;;AAExC,WAAOuF,WAAWd,qBAAX,CAAiC,YAAiB;AACrDzE;AACH,KAFM,CAAP;AAGH,CALD;;AAOA,IAAM2D,2BAA2B,SAA3BA,wBAA2B,GAAW;;AAExC,WAAO4B,WAAW5B,wBAAX,EAAP;AACH,CAHD;;AAKA,IAAM/E,aAAa,SAAbA,UAAa,CAASwH,OAAT,EAAiB;;AAEhC,QAAG,OAAOA,OAAP,KAAmB,UAAtB,EAAiC;;AAE7Bb,mBAAW9B,eAAX,CAA2B,YAAiB;AACxC2C;AACH,SAFD;AAGH;AACJ,CARD;;AAUA,IAAMC,oBAAoB,SAApBA,iBAAoB,GAAW;;AAEjC,WAAOd,WAAWhB,cAAX,EAAP;AACH,CAHD;;AAKA,IAAI+B,OAAO;AACPhK,wBADO;AAEPsC,0BAFO;AAGP+E,sDAHO;AAIPuC,kDAJO;AAKP9B;AALO,CAAX;;AAQA,IAAMmC,YAAY,SAAZA,SAAY,CAASpR,MAAT,EAAiB;;AAE/B,WAAOoQ,WAAWxB,WAAX,CAAuB5O,MAAvB,EAA+BmR,IAA/B,CAAP;AACH,CAHD;;AAKA,IAAME,aAAa,SAAbA,UAAa,CAASJ,OAAT,EAAiB;;AAEhC,QAAG,OAAOA,OAAP,KAAmB,UAAtB,EAAiC;;AAE7Bb,mBAAW1B,qBAAX,CAAiC,YAAiB;AAC9CuC;AACH,SAFD,EAEGE,IAFH;AAGH;AAEJ,CATD;;QAWSG,O,GAAAA,gB;QAASC,O,GAAAA,0B;QAASlB,S,GAAAA,S;QAAWO,kB,GAAAA,kB;QAAoBG,sB,GAAAA,sB;QAAwBvC,wB,GAAAA,wB;QAA0B0C,iB,GAAAA,iB;QAAmBE,S,GAAAA,S;QAAWjK,S,GAAAA,S;QAAW6J,gB,GAAAA,gB;QAAkBvH,U,GAAAA,U;QAAY4H,U,GAAAA,U;QAAYpC,Q,GAAAA,Q;;;;;;;;;;;;;;;;;;;;;AClH/L;;AAEA,IAAMqC,UAAU;AACRE,SADQ,mBACAC,MADA,EACQC,MADR,EACgB;AACV,QAAID,WAAWC,MAAf,EAAuB;AACrB,aAAO,IAAP;AACD;;AAED,QAAI,QAAOD,MAAP,yCAAOA,MAAP,OAAkB,QAAlB,IAA8BA,WAAW,IAAzC,IACA,QAAOC,MAAP,yCAAOA,MAAP,OAAkB,QADlB,IAC8BA,WAAW,IAD7C,EACmD;AAC7C,aAAO,KAAP;AACL;;AAED,QAAMC,QAAQjT,aAAKK,MAAL,CAAY6S,IAAZ,CAAiBH,MAAjB,CAAd;AACA,QAAMI,QAAQnT,aAAKK,MAAL,CAAY6S,IAAZ,CAAiBF,MAAjB,CAAd;;AAEA,QAAIC,MAAMzO,MAAN,KAAiB2O,MAAM3O,MAA3B,EAAmC;AACjC,aAAO,KAAP;AACD;;AAED;AACA,QAAM4O,kBAAkBpT,aAAKqT,cAAL,CAAoBzK,IAApB,CAAyBoK,MAAzB,CAAxB;AACA,SAAK,IAAI9K,IAAI,CAAb,EAAgBA,IAAI+K,MAAMzO,MAA1B,EAAkC0D,GAAlC,EAAuC;AACrC,UAAI,CAACkL,gBAAgBH,MAAM/K,CAAN,CAAhB,CAAD,IAA8B6K,OAAOE,MAAM/K,CAAN,CAAP,MAAqB8K,OAAOC,MAAM/K,CAAN,CAAP,CAAvD,EAAyE;AACvE,eAAO,KAAP;AACD;AACF;AACd;AAzBO,CAAhB;;QA4BS0K,O,GAAAA,O;;;;;;;;;;;;;;;;;;;AC9BT;;AAEA,IAAMC,UAAU;AACR/M,UAAK;AACQ,iBAAQ,OADhB;AAEQ,gBAAO,MAFf;AAGQ,kBAAS,QAHjB;AAIQ,kBAAS,QAJjB;AAKQ,mBAAU,SALlB;AAMQ,oBAAW,UANnB;AAOQ,kBAAS,QAPjB;AAQQ,kBAAS,QARjB;AASQwN,aATR,iBASc9H,KATd,EASqB;;AAEN,mBAAQA,iBAAiBxL,aAAKgM,KAAtB,IAA+BR,iBAAiBxL,aAAKmF,SAA7D;AACN,SAZT;AAaQoO,gBAbR,oBAaiB/H,KAbjB,EAawB;;AAET,mBAAQA,UAAU,IAAV,IAAkBA,UAAUhB,SAApC;AACN,SAhBT;;AAiBQ,mBAAU;AACPgJ,eADO,eACHhI,KADG,EACI;;AAEP,uBAAOxL,aAAKyT,QAAL,CAAcjI,KAAd,KAAyBA,UAAUxL,aAAK8J,QAAL,CAAc0B,KAAd,CAA1C;AACH,aAJM;AAKPkI,iBALO,iBAKDlI,KALC,EAKM;;AAET,uBAAOxL,aAAKyT,QAAL,CAAcjI,KAAd,KAAyBA,UAAUxL,aAAK2T,UAAL,CAAgBnI,KAAhB,CAA1C;AACH;AARM,SAjBlB;AA2BQoI,WA3BR,eA2BYpI,KA3BZ,EA2BmB;;AAEJ,mBAAQA,UAAU,IAAV,IAAkBA,UAAUhB,SAApC;AACN;AA9BT;AADG,CAAhB;;QAmCSqI,O,GAAAA,O;;;;;;;;;;;;;;;;;;;;ACpCT,IAAM7S,OAAS,gBAAgB,OAAO6T,OAAvB,IACX,uBAAwB,EAAD,CAAKtD,QAAL,CAAcvP,IAAd,CAAmB6S,OAAnB,CADb,IAEX,gBAAgB,OAAOC,SAAvB,IAAoCA,UAAUC,OAAV,KAAsB,aAF/C,GAGZC,MAHY,GAGH,OAAOC,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyCC,IAHpD;;AAKA,IAAMnT,MAAO,EAAD,CAAKsS,cAAjB;;AAEA,IAAMc,MAAO,EAAD,CAAKzP,KAAjB;;AAEA,IAAM0P,oBAAoB,SAApBA,iBAAoB;AAAA,WAAOlG,OAAO,KAAK,CAAnB;AAAA,CAA1B;;AAGA,IAAMmG,OAAO,SAAPA,IAAO,CAACnG,GAAD,EAAMoG,QAAN,EAAgBC,OAAhB,EAA4B;;AAExC,QAAGA,YAAY/J,SAAf,EAAyB;;AAEpB+J,kBAAU,IAAV;AACJ;;AAED,SAAI,IAAIC,IAAR,IAAgBtG,GAAhB,EAAoB;AACjB,YAAGnN,IAAIC,IAAJ,CAASkN,GAAT,EAAcsG,IAAd,CAAH,EAAuB;AACpBF,qBAAStT,IAAT,CAAcuT,OAAd,EAAuBrG,IAAIsG,IAAJ,CAAvB,EAAkCA,IAAlC,EAAwCtG,GAAxC;AACF;AACH;AACD,CAZD;;AAcA;;;;;;;AAOA,IAAMuG,SAAS,SAATA,MAAS,CAACnP,MAAD,EAASoP,IAAT,EAAkB;;AAE/B,QAAIC,QAAQ,EAAZ;;AAEA,SAAI,IAAIH,IAAR,IAAgBE,IAAhB,EAAqB;AACnB,YAAG3T,IAAIC,IAAJ,CAAS0T,IAAT,EAAeF,IAAf,CAAH,EAAwB;;AAErB,gBAAG,QAAOE,KAAKF,IAAL,CAAP,MAAsB,QAAtB,IACEE,KAAKF,IAAL,MAAe,IADpB,EACyB;AACvBG,sBAAMH,IAAN,IAAcC,OAAOnP,OAAOkP,IAAP,CAAP,EAAqBE,KAAKF,IAAL,CAArB,CAAd;AACA,aAHF,MAGO,IAAGlP,UAAUvE,IAAIC,IAAJ,CAASsE,MAAT,EAAiBkP,IAAjB,CAAb,EAAoC;AACzCG,sBAAMH,IAAN,IAAclP,OAAOkP,IAAP,CAAd;AACA,aAFK,MAEA;AACLG,sBAAMH,IAAN,IAAcE,KAAKF,IAAL,CAAd;AACA;AACJ;AACF;;AAEF,WAAOG,KAAP;AACA,CAnBD;;AAqBA,IAAMC,QAAQ,SAARA,KAAQ,CAACC,IAAD,EAAO9C,IAAP,EAAawC,OAAb;AAAA,WAAyB,YAAU;AAC7C,YAAIO,QAAQX,IAAInT,IAAJ,CAASyN,SAAT,CAAZ;AACA,eAAOoG,KAAK5Q,KAAL,CAAWsQ,OAAX,EAAoBxC,KAAKvE,MAAL,CAAYsH,KAAZ,CAApB,CAAP;AACH,KAHa;AAAA,CAAd;;AAKA,IAAMC,gBAAgB;AACjBC,aAAQ,CADS;AAEjBC,WAAM,CAFW;AAGjBC,cAAS,CAHQ;AAIjBC,cAAS;AAJQ,CAAtB;;AAOA,IAAMC,gBAAgB,SAAhBA,aAAgB,OAAQ;AACzB,QAAMC,UAAU,EAAhB;AAAA,QAAoBC,QAAQtT,OAAOuT,IAAP,EAAa/M,KAAb,CAAmB,GAAnB,CAA5B;AACA6L,SAAKiB,KAAL,EAAY,eAAO;AACbD,gBAAQ3P,GAAR,IAAe,IAAf;AACL,KAFD;AAGA2P,YAAQG,SAAR,GAAoB,CAAC,CAArB;AACA,WAAOH,OAAP;AACJ,CAPD;;AASA,IAAMI,WAAW,SAAXA,QAAW,OAAQ;AACrB,QAAMJ,UAAUD,cAAcG,IAAd,CAAhB;AACA,QAAIG,kBAAJ;AACA,QAAIC,gBAAJ;AACA,QAAInP,cAAJ;AACA,QAAIoP,cAAJ;AACA,QAAIC,eAAJ;AACA,QAAIC,UAAU,EAAd;AACA,QAAIC,QAAQV,QAAQW,QAAR,IAAoB,EAAhC;;AAEA,QAAMC,OAAO,SAAPA,IAAO,OAAQ;AACfZ,gBAAQG,SAAR,GAAoB,CAACS,KAAKC,QAAN,IAAkBb,QAAQc,IAA1B,IAAkCnL,IAAtD,CADe,CAC6C;AAC5D4K,gBAAQ,IAAR;AACAC,iBAAS,IAAT,CAHe,CAGA;AACfrP,gBAAQkP,aAAa,CAArB;AACAC,kBAAUG,QAAQtR,MAAlB;;AAEA,aAAIkR,YAAY,CAAhB,EAAmBlP,QAAQmP,OAA3B,EAAoCnP,OAApC,EAA4C;AACrC;AACFxG,iBAAK+J,UAAL,CAAgB6K,MAAMkB,QAAQtP,KAAR,CAAN,EAAsBwE,KAAK,CAAL,CAAtB,EAA+BA,KAAK,CAAL,CAA/B,CAAhB,CAAuD,2BAAvD,EAAoF,EAApF,EAFuC,CAEkD;AAC7F;;AAED6K,iBAAS,KAAT,CAZe,CAYC;;AAEhB,YAAGE,KAAH,EAAS;AAAE;AACP,gBAAGA,MAAMvR,MAAT,EAAgB;AACZ,uBAAOyR,KAAKF,MAAMK,KAAN,EAAL,CAAP,CADY,CACgB;AAC/B;AACA;AACJ;;AAEDH,aAAKC,QAAL,GAAgB,KAAhB;;AAEA,YAAGb,QAAQG,SAAX,EAAqB;AAClB,gBAAGH,QAAQgB,MAAX,EAAkB;AACd;AACAP,wBAAQtR,MAAR,GAAiB,CAAjB,CAFc,CAEM;AACvB;AACH;AACT,KA7BE;;AA+BA,WAAO;AACP8R,WADO,iBACD;AACF,gBAAIzR,MAAM,CAAV;AACA,gBAAGiR,OAAH,EAAW;AAAE;;AAET,oBAAMS,QAAQT,QAAQtR,MAAtB;AACC,0BAAS8R,GAAT,CAAavE,IAAb,EAAkB;;AAEZsC,yBAAKtC,IAAL,EAAW,eAAO;AAChC,4BAAMjM,cAAc0Q,GAAd,yCAAcA,GAAd,CAAN;;AAEqB,4BAAG1Q,QAAQ,UAAX,EAAsB;AAClBjB,kCAAMiR,QAAQ9P,IAAR,CAAawQ,GAAb,CAAN;AACH,yBAFD,MAEK;AACF,gCAAG,CAAC,CAACA,GAAF,IAASA,IAAIhS,MAAb,IAAuB,OAAOgS,GAAP,IAAc,QAAxC,EAAiD;AAC/C;AACEF,oCAAInC,IAAInT,IAAJ,CAASwV,GAAT,CAAJ;AACH;AACH;AACP,qBAXD;AAaL,iBAfD,EAeErC,IAAInT,IAAJ,CAASyN,SAAT,CAfF,CAAD;;AAkBT,oBAAImH,KAAJ,EAAW;AAAE;AACT,wBAAGP,QAAQoB,IAAX,EAAgB;AAChBf,oCAAYa,KAAZ;AACAZ,kCAAU9Q,GAAV,CAFgB,CAED;AACfoR,6BAAKC,QAAL,GAAgB,IAAhB;AACAD,6BAAMZ,QAAQG,SAAd,EAJgB,CAIW;AAC3B,6BAAKkB,OAAL;AAEC;AACJ;AAGK;AACD,mBAAO7R,GAAP;AACH,SAtCM;AAuCP8R,aAvCO,iBAuCDxS,EAvCC,EAuCG;AACR,gBAAIyS,SAAS,KAAb;AACOvC,iBAAKyB,OAAL,EAAc,eAAO;AAC3B,oBAAG,OAAO3R,EAAP,KAAc,UAAd,IAA4BA,OAAO+B,GAAtC,EACE0Q,SAAS,IAAT;AACN,aAHU,EAGR,IAHQ;AAIX,mBAAOA,MAAP;AACG,SA9CM;AA+CPC,eA/CO,qBA+CG;AACN,mBAAO,CAAC,CAACf,OAAT,CADM,CACY;AACrB,SAjDM;AAkDPgB,gBAlDO,sBAkDI,mBAAmB;AAC1B,gBAAGhB,YAAY,CAACF,KAAD,IAAUG,KAAtB,CAAH,EAAgC;AAC5B,oBAAMhE,OAAOtD,UAAUjK,MAAV,IAAoB2P,IAAInT,IAAJ,CAASyN,SAAT,CAApB,IAA2C,CAAC,IAAD,EAAO,CAAP,CAAxD;;AAEA,oBAAGoH,MAAH,EAAU;AAAE;AACRE,0BAAM/P,IAAN,CAAY+L,IAAZ,EADM,CACc;AACvB,iBAFD,MAEK;AACDkE,yBAAMlE,IAAN;AACH;AACJ;AACJ,SA5DM;AA6DP2E,eA7DO,qBA6DG;AACT,gBAAG,CAACrB,QAAQG,SAAZ,EAAsB;AACdM,0BAAUC,QAAQvL,SAAlB;AACP;AACD;AAjEM,KAAP;AAmEH,CA5GD;;AA8GA;;AAEA,IAAIuM,UAAU,SAAVA,OAAU,GAAU;;AAEpB,QAAMC,YAAY;AACd3N,iBAAQ,CAAC,MAAD,EAAS,UAAT,EAAqBoM,SAAS,CAAC,MAAD,EAAS,MAAT,CAAT,CAArB,CADM;AAEdwB,gBAAO,CAAC,MAAD,EAAS,UAAT,EAAqBxB,SAAS,CAAC,MAAD,EAAQ,MAAR,CAAT,CAArB,CAFO;AAGdyB,gBAAO,CAAC,UAAD,EAAa,OAAb,EAAsBzB,SAAS,CAAC,MAAD,EAAS,UAAT,CAAT,CAAtB;AAHO,KAAlB;;AAMA,QAAMvB,OAAO,IAAb;AACA,QAAIhB,OAAO7S,OAAO6S,IAAP,CAAY8D,SAAZ,CAAX;;AAEA,QAAIG,SAAS,gBAACC,MAAD,EAASC,GAAT,EAAcC,UAAd,EAA6B;AACtC,YAAMC,OAAQH,UAAU,QAAxB;AACA,YAAG,CAACC,IAAI7S,MAAL,IAAe,CAAC8S,UAAnB,EAA+B,OAAON,UAAUI,MAAV,EAAkB,CAAlB,EAAqBN,QAA5B;AAC/B,eAAQ,CAACQ,UAAF,GAAe,YAAU;AAC5B,gBAAGpD,KAAKnN,KAAL,IAAc,CAAd,IAAmBmN,KAAKnN,KAAL,IAAa,CAAnC,EAAqC;AACjCmN,qBAAKnN,KAAL,GAAagO,cAAciC,UAAUI,MAAV,EAAkB,CAAlB,CAAd,CAAb;AACH;;AAEDJ,sBAAUI,MAAV,EAAkB,CAAlB,EAAqBN,QAArB,CAA8B5C,SAAS,IAAT,GAAeA,IAAf,GAAsB,IAApD,EAA0D,GAAGxP,KAAH,CAAS1D,IAAT,CAAcyN,SAAd,CAA1D;;AAEA,gBAAG8I,IAAH,EAAQ;AACbP,0BAAUK,IAAI,CAAJ,CAAV,EAAkB,CAAlB,EAAqBX,OAArB;AACSM,0BAAUK,IAAI,CAAJ,CAAV,EAAkB,CAAlB,EAAqBX,OAArB;AACT,wBAAOU,MAAP;AACA,yBAAK,QAAL;AACA,yBAAK,SAAL;AACGlD,6BAAKnN,KAAL,GAAagO,cAAciC,UAAUI,MAAV,EAAkB,CAAlB,CAAd,CAAb;AACH;AAJA;AAMH;AACQ,mBAAO,IAAP;AACH,SAlBM,GAkBH,YAAU;AACV,gBAAGlD,KAAKnN,KAAL,IAAc,CAAd,IAAmBmN,KAAKnN,KAAL,IAAa,CAAnC,EAAqC;AACjCiQ,0BAAUI,MAAV,EAAkB,CAAlB,EAAqBd,GAArB,CAAyBrS,KAAzB,CAA+BiQ,IAA/B,EAAqCC,IAAInT,IAAJ,CAASyN,SAAT,CAArC;AACH;AACD,mBAAOyF,IAAP;AACH,SAvBD;AAwBH,KA3BD;;AA6BA,QAAIhM,IAAI,CAAR;AACA,QAAIsP,KAAKtE,KAAKxO,KAAL,EAAT;AACA,QAAI6F,UAAJ;AACA,QAAMpB,UAAU,EAAhB;;AAGA;;AAEA,SAAIoB,CAAJ,IAASyM,SAAT,EAAmB;AACf,YAAGjW,IAAIC,IAAJ,CAASgW,SAAT,EAAoBzM,CAApB,CAAH,EAA0B;AACtB2I,iBAAK5G,MAAL,CAAYpE,GAAZ,EAAiB,CAAjB;AACAgM,iBAAK3J,CAAL,IAAU4M,OAAO5M,CAAP,EAAU2I,IAAV,CAAV;AACAgB,iBAAQ3J,CAAR,aAAmB4M,OAAO5M,CAAP,EAAU,EAAV,CAAnB;AACApB,oBAAQ6N,UAAUzM,CAAV,EAAa,CAAb,CAAR,IAA2B4M,OAAO5M,CAAP,EAAU,EAAV,EAAc,IAAd,CAA3B;AACA2I,mBAAOsE,GAAG9S,KAAH,EAAP;AACH;AACJ;;AAEDyE,YAAQpC,KAAR,GAAgBgO,cAAcC,OAA9B;;AAEA7L,YAAQsO,MAAR,GAAiB,YAAU;AACvB,eAAO,KAAKC,IAAL,CAAUzT,KAAV,CAAgBiQ,IAAhB,EAAsBzF,SAAtB,EAAiCkJ,IAAjC,CAAsC1T,KAAtC,CAA4CiQ,IAA5C,EAAkDzF,SAAlD,CAAP;AACH,KAFD;;AAIAtF,YAAQA,OAAR,GAAkB,eAAO;AACrB,YAAG+E,OAAO,QAAOA,GAAP,yCAAOA,GAAP,MAAc,QAArB,IAAiC,CAACA,IAAI1J,MAAzC,EAAgD;AAC5C,iBAAI,IAAM0D,EAAV,IAAeiB,OAAf,EAAuB;AACnB,oBAAGpI,IAAIC,IAAJ,CAASmI,OAAT,EAAkBjB,EAAlB,CAAH,EAAwB;AACpBgG,wBAAIhG,EAAJ,IAASiB,QAAQjB,EAAR,CAAT;AACH;AACJ;AACD,mBAAOgG,GAAP;AACH;AACD,eAAO/E,OAAP;AACH,KAVD;;AAYAA,YAAQyO,IAAR,GAAe,YAAS,gCAAiC;AACrD,YAAIC,YAAJ;AACA,YAAM9F,OAAO,GAAGrN,KAAH,CAAS1D,IAAT,CAAcyN,SAAd,CAAb;AACAsD,aAAK+F,OAAL,CAAa,UAACC,IAAD,EAAO7P,CAAP,EAAa;AACb6P,mBAAQ,OAAOA,IAAP,IAAe,UAAhB,IAA+BA,IAAtC;AACA7D,iBAAK8C,UAAU9D,KAAKhL,CAAL,CAAV,EAAmB,CAAnB,CAAL,EAA4B,YAAU;AACpD,oBAAI8P,WAAJ;AACA,oBAAG;AACF;;;;AAIEA,yBAAKD,QAAQA,KAAK9T,KAAL,CAAW,IAAX,EAAiBwK,SAAjB,CAAb;AACF,iBAND,CAMC,OAAMvO,CAAN,EAAQ;AACN8X,yBAAK,KAAKf,MAAL,CAAY/W,CAAZ,CAAL;AACF,iBARD,SAQQ;AACL,wBAAG8X,MAAM,OAAOA,GAAG7O,OAAV,IAAqB,UAA9B,EACK0O,MAAMG,GAAG7O,OAAH,EAAN;AACP;AACc,aAdD;AAeZ,SAjBD;AAkBA,eAAO+K,KAAK/K,OAAL,CAAa0O,GAAb,CAAP;AACH,KAtBD;;AAwBA1O,YAAQC,UAAR,GAAqB;AAAA,eAAM,CAAC4N,UAAU,QAAV,EAAoB,CAApB,EAAuBH,OAAvB,EAAP;AAAA,KAArB;AACA1N,YAAQ8O,UAAR,GAAqB;AAAA,eAAM,CAACjB,UAAU,SAAV,EAAqB,CAArB,EAAwBH,OAAxB,EAAP;AAAA,KAArB;AACA1N,YAAQ+O,IAAR,GAAe/O,QAAQyO,IAAvB;;AAEAzO,YAAQA,OAAR,CAAgB+K,IAAhB;;AAEA6C,YAAQ/B,OAAR,GAAkBD,cAAcC,OAAhC;AACA+B,YAAQoB,QAAR,GAAmBpD,cAAcE,KAAjC;AACA8B,YAAQ7B,QAAR,GAAmBH,cAAcG,QAAjC;AACA6B,YAAQ5B,QAAR,GAAmBJ,cAAcI,QAAjC;;AAEA;AACAgC,aAASK,KAAKjN,IAAIrC,IAAI,IAAtB;;AAEA;AACA,WAAQgM,gBAAgB6C,OAAjB,GAA2B7C,IAA3B,GAAkC,IAAI6C,OAAJ,EAAzC;AACH,CApHD;;QAsHShW,G,GAAAA,G;QAAKoT,G,GAAAA,G;QAAKC,iB,GAAAA,iB;QAAmBpU,I,GAAAA,I;QAAMqU,I,GAAAA,I;QAAMI,M,GAAAA,M;QAAQG,K,GAAAA,K;QAAOmC,O,GAAAA,O;;;;;;;;;;;;;;;;;;;;;;AClTjE;;AAEA,IAAIqB,iBAAiBpY,aAAKkL,cAA1B;;AAEA,IAAImN,WAAWrY,aAAKmL,QAApB;;AAEA,IAAImN,mBAAmB,KAAvB;;AAEA,IAAIC,gCAAgC,SAAhCA,6BAAgC,QAAS;AAC3C,QAAGtO,MAAMnE,IAAN,KAAe,OAAlB,EAA0B;AACtB,YAAGmE,MAAMuO,eAAT,EAAyB;AACvBvO,kBAAMuO,eAAN;AACD,SAFD,MAEK;AACHvO,kBAAMlG,YAAN,GAAqB,IAArB;AACD;AACF;AACJ,CARD;;AAUA,IAAM0U,gCAAgC,SAAhCA,6BAAgC;AAAA,WAAU,aAAK;;AAEjD;;AAEA;;;;;AAKA,YAAMC,oBAAqB1Y,aAAK2Y,mBAAL,CAAyB;AAAzB,WACZzY,EAAE0Y,sBADU,CACa;AADb,WAEP1Y,EAAE2Y,WAAF,IAAiB3Y,EAAE2Y,WAAF,CAAcC,aAFxB,CAEuC;AAFvC,WAGH5Y,EAAE6Y,aAAF,IAAmB7Y,EAAE6Y,aAAF,CAAgB5X,QAAhB,CAAyB2X,aAHzC,CAGwD;AAHxD,WAIA5Y,EAAE8Y,UAJF,IAKI9Y,EAAEqD,MALjC;;AAOA;AACA,YAAM0V,eAAe,4CAArB;;AAEA,YAAMC,WAAa,OAAOR,kBAAkBS,YAAzB,IAAyC,UAAzC,IAAuDT,kBAAkBS,YAAlB,CAA+B,WAA/B,CAAvD,IAAsGT,kBAAkBU,YAAlB,CAA+B,WAA/B,EAA4ClP,QAA5C,CAAqD5I,OAAO0B,OAAP,CAAeE,YAApE,CAAvG,IACG,UAAUwV,iBAAX,IAAkCA,kBAAkBjT,IAAlB,CAAuByE,QAAvB,CAAgC5I,OAAO0B,OAAP,CAAeE,YAA/C,CADtD;;AAGA,YAAMmW,oBAAoB,SAApBA,iBAAoB,GAAM;;AAExBf,+BAAmBe,kBAAkBC,IAArC;AAEP,SAJD;;AAMA;;AAEAD,0BAAkBC,IAAlB,GAAyBhB,mBAAmB,IAA5C;AACA,YAAIiB,oBAAoBvZ,aAAK+J,UAAL,CAAgBsP,iBAAhB,EAAmC,CAAnC,CAAxB;;AAEA,YAAGH,QAAH,EAAY;AAAE;AACV,gBAAG,CAAC,CAAC,CAAChZ,EAAE4F,IAAF,CAAOyC,OAAP,CAAe,cAAf,CAAN,EAAqC;AACjCrI,kBAAE0K,WAAF,GAAgBqO,YAAhB;AACH,aAFD,MAEK;AACDO,2BAAWxZ,aAAKyZ,OAAL,IAAgBzZ,aAAKyZ,OAAL,CAAaR,YAAb,CAA3B;;AAEA,oBAAG,CAACO,QAAJ,EAAa;AACTjB,kDAA8BrY,CAA9B;AACH;AACJ;AACJ,SAVD,MAUK;AACDqY,0CAA8BrY,CAA9B;AACH;;AAED;AACA,eAASgZ,QAAD,GAAe,CAACG,kBAAkBC,IAAlB,GAAyB,KAA1B,KAAoCL,YAAnD,GAAmEjZ,aAAK0Z,YAAL,CAAkBH,iBAAlB,CAA3E;AACH,KAjDqC;AAAA,CAAtC;;AAmDA,IAAMI,0BAA0B,SAA1BA,uBAA0B;AAAA,WAAO,aAAK;;AAExC;;;;;;;;AAQQ,YAAG,CAACrB,gBAAJ,EAAqB;;AAEjBtY,yBAAK+J,UAAL,CAAgB,YAAM;;AAEd,oBAAI6P,WAAW,EAAf;;AAEA9O,oBAAIrC,SAAJ,CAAc,UAAC2D,KAAD,EAAQrD,IAAR,EAAiB;;AAE3B,wBAAM9B,QAAQmF,MAAMC,QAAN,EAAd;;AAEAuN,6BAAS3S,KAAT,IAAkBmF,MAAMyN,QAAN,EAAlB;;AAEAzN,0BAAM0N,UAAN;AACA1N,0BAAM2N,OAAN;;AAEAhR;AAEH,iBAXD;;AAaA,oBAAG,OAAO+B,IAAImF,KAAX,IAAoB,UAAvB,EAAkC;;AAE9BnF,wBAAImF,KAAJ,CAAUjP,IAAV,CAAe8J,GAAf,EAAoB8O,QAApB;AACH;;AAED,oBAAG1Z,EAAE4F,IAAF,IAAU,OAAb,EAAqB;AACjBuS,6BAASnY,CAAT;AACH;AAER,aA1BD,EA0BG,CA1BH;AA2BH;AACZ,KAxC+B;AAAA,CAAhC;;AA0CA,IAAMuP,SAAS;AACTuK,cAAS;AACC,kBAASxK,MADV;AAEC,iBAAQF,KAFT;AAGC,kBAASjP,MAHV;AAIC,kBAAS2B,MAJV;AAKC,mBAAUiH,OALX;AAMC,gBAAOgR,IANR;AAOC,kBAASC,MAPV;AAQC,oBAAWC;AARZ,KADA;AAWTzK,YAXS,oBAWA5J,IAXA,EAWM0F,KAXN,EAWa;;AAEhB,YAAG,OAAO1F,IAAP,KAAgB,UAAnB,EAA8B;;AAE1B,mBAAOA,KAAK0F,KAAL,CAAP;AACH,SAHD,MAKK,IAAG,OAAO1F,IAAP,KAAgB,QAAhB,IACQA,QAAQ,KAAKkU,QADxB,EACkC;AACnClU,mBAAOA,KAAKsU,WAAL,EAAP,CADmC,CACR;;AAE3B,mBAAQ,qBAAoBC,IAApB,QAAgC7O,KAAhC,yCAAgCA,KAAhC,EAAD,IACSnL,OAAOmL,KAAP,aAAyB,KAAKwO,QAAL,CAAclU,IAAd;AADzC;AAEH;;AAED,eAAO,KAAP;AACL;AA3BQ,CAAf;;AA+BA;AACA,IAAMkM,QAAS,YAAU;;AAExB,QAAIsI,mBAAmB,CAAC,UAAD,EAAa,MAAb,CAAvB;;AAEA,QAAIC,yBAAyB,EAA7B;;AAEA,QAAIC,kBAAkB,EAAtB;;AAEA,WAAO,UAASvT,KAAT,EAAe;;AAErB,YAAIwT,OAAO,IAAX;;AAEA,aAAKpO,QAAL,GAAgB,YAAU;;AAEzB,mBAAOpF,KAAP;AACA,SAHD;;AAKA,aAAKyT,MAAL,GAAc,YAAU;;AAEvB,mBAAO;AACMzT;AADN,aAAP;AAGA,SALD;;AAOA,aAAK0T,SAAL,GAAiB,UAASxO,QAAT,EAAkB;;AAElC,gBAAIyO,WAAWzG,IAAInT,IAAJ,CAASyN,SAAT,EAAoB,CAApB,CAAf;;AAEA,gBAAG,OAAOtC,QAAP,KAAoB,UAAvB,EAAkC;;AAEjCyO,yBAAS3U,OAAT,CAAiB,IAAjB;;AAEA,uBAAOkG,SAASlI,KAAT,CAAe,IAAf,EAAqB2W,QAArB,CAAP;AACA;;AAED,mBAAO,IAAP;AAEA,SAbD;;AAeA,aAAKC,QAAL,GAAgB,YAAU;;AAExB,cAAD,CAAK7U,IAAL,CAAU/B,KAAV,CAAgBuW,eAAhB,EAAiCrG,IAAInT,IAAJ,CAASyN,SAAT,CAAjC;AACA,SAHD;;AAKA,aAAK8B,QAAL,GAAgB,YAAU;;AAEzB,mBAAO,sBAAP;AACA,SAHD;AAIA,KAxCD;AA0CA,CAlDc,EAAf;;AAoDA;AACA,IAAO4B,SAAU,YAAU;;AAEvB,WAAO,UAAS7P,EAAT,EAAY;;AAEX,aAAK4M,KAAL,GAAa,YAAU;;AAEnB,mBAAO5M,EAAP;AACH,SAHD;;AAKA,aAAKoY,MAAL,GAAc,YAAU;;AAEpB,mBAAO;AACHpY;AADG,aAAP;AAGH,SALD;;AAOA,aAAKiO,QAAL,GAAgB,YAAU;;AAEtB,mBAAO,8BAAP;AACH,SAHD;AAIP,KAlBD;AAoBH,CAtBgB,EAAjB;;QAyBSd,M,GAAAA,M;QAAQuC,K,GAAAA,K;QAAOG,M,GAAAA,M;QAAQsG,6B,GAAAA,6B;QAA+BkB,uB,GAAAA,uB","file":"radixx.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Radixx\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Radixx\"] = factory();\n\telse\n\t\troot[\"Radixx\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/es/index.js\");\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\r\n} catch (e) {\r\n\t// This works if the window reference is available\r\n\tif (typeof window === \"object\") g = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n","import { wind, Hop, Futures, isNullOrUndefined, each, extend } from '../utils/routines/basics.js';\r\nimport { $createBeforeTearDownCallback, $createTearDownCallback } from '../utils/routines/extras.js';\r\n\r\n    \r\ntry {\r\n      const ce = new wind.CustomEvent('test');\r\n} catch(e) {\r\n\r\n        CEvent.prototype = wind.Object.create(((w.Event && w.Event.prototype) || {}));\r\n        wind.CustomEvent = null;\r\n        wind.CustomEvent = CEvent;\r\n}\r\n\r\nconst persistStore = (wind.top !== wind || !wind.localStorage) ? null : wind.localStorage;\r\n\r\nconst sessStore = (wind.top !== wind || !wind.sessionStorage ? (wind.opera && !(Hop.call(wind, 'opera')) ? wind.opera.scriptStorage : {} ) : wind.sessionStorage);\r\n\r\nconst mode = wind.document.documentMode || 0;\r\n\r\nlet autoRehydrationOccured = false;\r\n\r\nlet config = null;\r\n\r\n    const watchers = [\r\n\r\n];\r\n\r\n    const stores = {\r\n\r\n};\r\n\r\n    const storeKeys = [\r\n\r\n];\r\n\r\n    const observers = {\r\n\r\n};\r\n\r\n    const _promises = {\r\n\r\n};\r\n\r\n    const waitQueue = [\r\n\r\n];\r\n\r\n    const cachedStorageKeys = {\r\n\r\n};\r\n\r\nconst dispatchRegistry = {\r\n    \r\n};\r\n\r\nconst getAppOriginForPersist = cfg => String(wind.location.origin + (cfg.localHostDev ? ':'+wind.document.documentElement.id : ''));\r\n\r\nconst generateTag = origin => {\r\n\r\n\tconst _cdata = persistStore.getItem(origin);\r\n\t\r\n\tif(!isNullOrUndefined(_cdata)){\r\n\r\n\t\treturn getNormalized(_cdata);\r\n\t}\r\n\r\n\treturn String(Math.random()).replace('.','x_').substring(0, 11);\r\n};\r\n\r\nconst defaultConfig = {\r\n\t\truntime:{\r\n\t\t\tspaMode:true, \r\n\t\t\tshutDownHref:''\r\n\t\t},\r\n\t\tpersistenceEnabled:false,\r\n\t\tautoRehydrate:false,\r\n\t\tuniversalCoverage:false,\r\n\t\tlocalHostDev:false\r\n};\r\n\r\nconst triggerEvt = (target, eType, detail, globale) => {\r\n        const evt = new CustomEvent(eType, {\r\n                            detail,\r\n                            cancelable:true,\r\n                            bubbles:false\r\n            }); // a stub function - just in case\r\n\r\n        let dispatch = () => false;\r\n\r\n        if((!('target' in evt)) \r\n                && evt.cancelBubble === true){\r\n\r\n            target.setCapture(true);\r\n        }\r\n\r\n        // set up cross-browser dispatch method.\r\n        dispatch = target[ (!('target' in evt) ? \"fireEvent\" : \"dispatchEvent\") ];\r\n\r\n        // Including support for IE 8 here ;)\r\n        return dispatch.apply(target, (!('target' in evt) ? [`on${eType}`, evt ] : [ evt ]));\r\n};\r\n\r\nconst operationOnStoreSignal = (fn, queueing, area, action) => { \r\n\r\n\t    // first, retrieve the very first state data and cache it\r\n\t    if(fn.$$history.length == 1 \r\n\t\t&& (!fn.$$initData)){\r\n\r\n\t \t\tfn.$$initData = fn.$$history[0];\r\n\t    }\t\t\r\n\r\n\t    // second, make sure that there is no future state to forth on\t\r\n\t    fn.$$history = fn.$$history.slice(0, fn.$$historyIndex + 1);\r\n\t    \r\n\t    // lets setup a place to store new state, also mark out the context of this call\r\n\t    let newStoreState = false, len, _key;\r\n\r\n\t    // create a new state of the store data by applying a given\r\n\t    // store callback function to the current history head\r\n\r\n\t    if(queueing === null){\r\n\r\n\t    \tif(action !== null){\r\n\r\n\t\t    \tnewStoreState = action.actionData;\r\n\r\n\t\t    }else{\r\n\r\n\t\t    \tnewStoreState = fn.$$history[fn.$$historyIndex];\r\n\t\t    }\r\n\r\n\t\t    coverageNotifier.$$historyLocation = fn.$$historyIndex;\r\n\r\n\t    }else{\r\n\t    \t\r\n\t    \tnewStoreState = fn.call(queueing, action, (area.get() || fn.$$initData));\r\n\r\n\r\n\t    }\r\n\r\n\t\tif(typeof newStoreState === 'boolean'\r\n\t\t\t|| isNullOrUndefined(newStoreState)){\r\n\t\t\t\r\n\t\t\tthrow new TypeError(\"Radixx: Application State unavailable after signal to Dispatcher\");\t\t\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t_key = area.put(newStoreState);\r\n\r\n\t\tcoverageNotifier.$$currentStoreTitle = _key;\r\n\t    \r\n\t    if(action !== null){\r\n\r\n\t    \tif(action.source !== 'hydrate'){\r\n    \t\t\t\t;\r\n\t    \t}\r\n\r\n\t    \tcoverageNotifier.$$withAction = true;\r\n\r\n\t    \ttriggerEvt(\r\n\t\t\t\t\twind.document, \r\n\t\t\t\t\t'storesignal', \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\turl:wind.location.href,\r\n\t\t\t\t\t\tkey:_key,\r\n\t\t\t\t\t\tnewValue:newStoreState,\r\n\t\t\t\t\t\tsource:wind,\r\n\t\t\t\t\t\taspect:action.actionKey,\r\n\t\t\t\t\t\ttype:action.actionType\r\n\t\t\t\t\t}, \r\n\t\t\t\t\twind\r\n\t\t\t);\r\n\r\n\t\t    // add the new state to the history list and increment\r\n\t\t    // the index to match in place\r\n\t\t    len = fn.$$history.push(newStoreState); /* @TODO: use {action.actionType} as operation Annotation */\r\n\t\t    \r\n\t\t    fn.$$historyIndex++;\r\n\r\n\t\t    coverageNotifier.$$historyLocation = fn.$$historyIndex;\r\n\r\n\t\t    if(fn.$$history.length > 21){ // can't undo/redo (either way) more than 21 moves at any time\r\n\r\n\t\t  \t\tfn.$$history.unshift();\r\n\t\t    }\r\n\r\n\t    }else{\r\n\r\n\t    \tcoverageNotifier.$$historyLocation = fn.$$historyIndex;\r\n\r\n\t    \treturn newStoreState;\r\n    \t}\r\n\t   \r\n\t};\r\n\r\n    const getNormalized = val => {\r\n\r\n\t   \tif(isNullOrUndefined(val) || val === \"null\")\r\n\t   \t\t return null;\r\n\r\n\t\ttry{\r\n\t\t\treturn JSON.parse(val);\r\n\t\t}catch(e){\r\n\t\t\treturn String(val);\r\n\t\t}\r\n\t};\r\n\r\n    const setNormalized = val => {\r\n\r\n\t   \tif(isNullOrUndefined(val)) \r\n\t   \t\tval = null;\r\n\r\n\t\ttry{\r\n\t\t\treturn JSON.stringify(val);\r\n\t\t}catch(e){\r\n\r\n\t\t\treturn String(val);\r\n\t\t}\r\n\t};\r\n\r\n\tconst getActionOnStack = (index) => {\r\n\r\n\t\tconst actionsStack = operationOnStoreSignal.$$redoActionsStack;\r\n\r\n\t\tif(actionsStack.length){\r\n\t\t\tif(typeof index !== 'number'){\r\n\t\t\t\treturn actionsStack[actionsStack.length - 1];\r\n\t\t\t}else{\r\n\t\t\t\treturn actionsStack[index];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\t};\r\n\r\n    const coverageNotifier = appState => {\r\n\t    \r\n        let currentAction = null;\r\n\t    \r\n        const _tag = coverageNotifier.$$tag;\r\n\r\n        if(coverageNotifier.$$withAction === true){\r\n\t\t\tcurrentAction = getActionOnStack();\r\n\t\t\tcoverageNotifier.$$withAction = null;\r\n\t\t}else{\r\n\t\t\tcurrentAction = getActionOnStack(coverageNotifier.$$historyLocation);\r\n\t\t}\r\n\r\n        if(!isNullOrUndefined(_tag)\r\n\t\t\t&& (persistStore !== null)){\r\n\r\n\t\t\tpersistStore.setItem(_tag, setNormalized({\r\n        \t\t\tstate:appState, \r\n\t\t\t\t\taction:currentAction,\r\n\t\t\t\t\ttitle:coverageNotifier.$$currentStoreTitle, \r\n\t\t\t\t\thistoryLoc:coverageNotifier.$$historyLocation\r\n\t\t\t}));\r\n\r\n\t\t\tcoverageNotifier.$$historyLocation = null;\r\n\t\t}\r\n    };\r\n\r\n    const fireWatchers = (state, omitCallback) => {\r\n\r\n\t\tlet pos, watcher;\r\n\r\n\t\tfor(pos in watchers){\r\n\t\t\tif(Hop.call(watchers, pos)){\r\n\t\t\t\twatcher = watchers[pos];\r\n\t\t\t\tif(omitCallback){\r\n\t\t\t\t\tif(watcher.$$canOmit){\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\twatcher.call(null, state);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tconst setAppState = function(appState) {\r\n\r\n\t\t\teach(appState, (isolatedState, storeTitle) => {\r\n\r\n\t\t\t\tconst area = new Area(storeTitle);\r\n\r\n\t\t\t\tarea.put(isolatedState);\r\n\t\t\t\r\n\t\t\t});\r\n\r\n\t\t\tfireWatchers(appState, true);\r\n\t};\r\n\r\n    const getAppState = function() {\r\n\r\n\t        const appStateData = {};\r\n\t        let key;\r\n\t        let indexStart;\r\n\t        let indexEnd;\r\n\t        let values;\r\n\t        let _data;\r\n\r\n\t        if(('key' in sessStore) \r\n\t                && (typeof sessStore.key == 'function')){\r\n\r\n\t            // We iterate this way so we can support IE 8 + other browsers\r\n\t            for(var i=0; i < sessStore.length; i++){\r\n\t                key = sessStore.key(i);\r\n\t                _data = sessStore.getItem(key);\r\n\r\n\t                if(typeof _data !== 'string' \r\n\t                \t\t|| _data.length === 0){\r\n\t\t\t\t\t\tobserver = observers[key];\r\n\t\t\t\t\t\tif(!!observer \r\n\t\t\t\t\t\t\t&& observer.$$history.length){\r\n\t\t\t\t\t\t\t_data = observer.$$history[0];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_data = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tappStateData[key] = (typeof _data === 'string' ? getNormalized(_data) : _data);\r\n\t\t\t\t\tconsole.log(\"hhhhhhhhhhhhhhhhh::::::::::\", appStateData, \">>>>> \", getNormalized(_data));\r\n\t            }\r\n\t        }else{\r\n\t        \r\n\t        \r\n\t            for(var i = 0; i < storeKeys.length; i++){\r\n\t                \r\n\t                key = storeKeys[i];\r\n\t                \r\n\t                if(cachedStorageKeys[key]){\r\n\r\n\t                    indexStart = wind.name.indexOf(key);\r\n\r\n\t                    indexEnd = wind.name.indexOf('|', indexStart);\r\n\r\n\t                    values = (wind.name.substring(indexStart, indexEnd)).split(':=:') || [\"\", null];\r\n\r\n\t                    _data = values[1];\r\n\r\n\t                }else {\r\n\t\t\t\t\t\tobserver = observers[key];\r\n\t\t\t\t\t\tif(!!observer\r\n\t\t\t\t\t\t\t&& observer.$$history.length){\r\n\t\t\t\t\t\t\t_data = observer.$$history[0];\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_data = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tappStateData[key] = (typeof _data === 'string' ? getNormalized(_data) : _data);\r\n\t            }\r\n\t        }\r\n\r\n\t        return appStateData;\r\n\t};\r\n\r\n\tconst eachStore = function(fn, extractor, storeArray){\r\n\r\n\t\teach(storeKeys, extractor.bind((storeArray = []), stores));\r\n\r\n        let callable = fn;\r\n        let prevIndex = storeArray.length - 1;\r\n\r\n        const next = () => {\r\n\t\t\r\n\t\t\tlet returnVal;\r\n\r\n\t\t\tif(prevIndex >= 0){\t\r\n\t\t\t\treturnVal = Boolean(\r\n\t\t\t\t\tcallable.call(\r\n\t\t\t\t\t\t\tnull, \r\n\t\t\t\t\t\t\tstoreArray[prevIndex--], \r\n\t\t\t\t\t\t\tnext\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t}else{\r\n\t\t\t\tcallable = !0;\r\n\t\t\t\treturnVal = callable;\r\n\t\t\t}\r\n\r\n\t\t\treturn returnVal;\r\n\t\t};\r\n\r\n        next();\r\n\t};\r\n\r\n\tconst handlePromises = () => {\r\n        let promise = null;\r\n        const state = getAppState();\r\n\r\n        for(const title in _promises){\r\n\t\t\tif(Hop.call(_promises, title)){\r\n\t\t\t\tpromise = _promises[title];\r\n\t\t\t\tif(!promise.isResolved()){\r\n\t\t\t\t\tpromise.resolve();\r\n\t\t\t\t}\r\n\t\t\t\tdelete _promises[title];\r\n\t\t\t}\r\n\t\t}\r\n\r\n        waitQueue.length = 0;\r\n\r\n        fireWatchers(state);\r\n    };\r\n\r\n\tconst enforceCoverage = e => {\r\n\r\n        const _origin = enforceCoverage.$$origin;\r\n        const _tag = enforceCoverage.$$tag;\r\n        let _action = null;\r\n        let _state = null;\r\n        let _title = null;\r\n        let _hloc = null;\r\n        let _composedData = null;\r\n        let observer = null;\r\n\r\n        // Detecting IE 8 to apply mild hack on event object\r\n        if(('remainingSpace' in sessStore)){\r\n\t\t\te.key = e.detail.key;\r\n\t\t}\r\n\r\n        if(!persistStore\r\n\t\t\t|| _origin === e.key){ // if we can't find the key in the array `storeKeys`\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n        _composedData = getNormalized(persistStore.getItem(_tag));\r\n\r\n        if(_tag === e.key\r\n\t\t\t&& isNullOrUndefined(_composedData)){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n        _state = _composedData.state;\r\n\r\n        _action = _composedData.action;\r\n\r\n        _title = _composedData.title;\r\n\r\n        _hloc = parseInt(_composedData.historyLoc);\r\n\r\n        if(_action !== null){\r\n\t\t\toperationOnStoreSignal.$$redoActionsStack.push(_action);\r\n\t\t}\r\n\r\n        if(_hloc !== null){\r\n\t\t\tobserver = observers[_title];\r\n\t\t\tif(observer){\r\n\t\t\t\tobserver.$$historyIndex = _hloc;\r\n\t\t\t\tif(_hloc === -1){\r\n\t\t\t\t\tobserver.$$history.length = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n        if(_state){\r\n\t\t\tsetTimeout(\r\n\t\t\t\tsetAppState.bind(null, _state)\r\n\t\t\t, 0); \r\n\t\t}\r\n    };\r\n\r\n\tconst stateWatcher = e => {\r\n\r\n\t\te = e || wind.event;\r\n\r\n\t\tif(storeKeys.includes(e.detail.key)){\r\n            const storeTitle = e.detail.key;\r\n            let listeners;\r\n\r\n            if(!isNullOrUndefined(observers[storeTitle])){\r\n\r\n\t\t\t\tlisteners = observers[storeTitle].$$store_listeners;\r\n\r\n\t\t\t\tfor(let t=0; t < listeners.length; t++){\r\n\t\t\t\t\t\t    \t\t\t\r\n\t\t\t\t\tlisteners[t].call(stores[storeTitle], e.detail.type, e.detail.aspect);\r\n\t\t\t\t\t\t    \r\n\t\t\t\t}\r\n\t\t\t}\r\n        }\r\n\t};\r\n\r\n\t/**\r\n\t    Though IE 9 to IE 11 supports the CustomEvent constructor, IE throws an error {Object doesn't support this action} \r\n\t    whenever it's used. This weird behaviour is fixed below\r\n\t    See: https://stackoverflow.com/questions/14358599/object-doesnt-support-this-action-ie9-with-customevent-initialization\r\n\t*/\r\n\r\n\tfunction CEvent ( event, params ) {\r\n\t    let t;\r\n\t    let evt;\r\n\t    let d = wind.document;\r\n\t    params = params || { bubbles: false, cancelable: false, detail: undefined };\r\n\t    \r\n\t    try{\r\n\t\t\t    evt = d.createEvent( 'CustomEvent' );\r\n\t\t\t    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\r\n\t\t}catch(e){\r\n\t\t\t    evt = d.createEventObject(w.event);\r\n\t\t\t  \tevt.cancelBubble = !params.bubbles;\r\n\t        \r\n\t        \tevt.returnValue = !params.cancelable;\r\n\t\t\t\t\r\n\t        if(typeof params.detail === \"object\"){\r\n\t\t\t\t\t    \r\n\t\t\t    evt.detail = params.detail;\r\n\t\t  \t}\t\r\n\t\t}\r\n\t    \r\n\t    return evt;\r\n\t}\r\n\r\n\tfunction setupConfigSettings(config, hub){\r\n\r\n\t\t \tif(config.universalCoverage){\r\n\r\n\t\t \t\tconfig.persistenceEnabled = true;\r\n\t\t \t}\r\n\r\n\t\t \tif(config.persistenceEnabled){\r\n\r\n\t\t\t\t\t// prepare Origin \r\n\t\t\t\t\tconst _origin = getAppOriginForPersist(config);\r\n\r\n\t\t\t\t\tconst _tag = generateTag(_origin);\r\n\r\n\t\t\t\t\tpersistStore.setItem(_origin, _tag);\r\n\r\n\t\t\t\t\tenforceCoverage.$$origin = _origin;\r\n\r\n\t\t\t\t\tenforceCoverage.$$tag = _tag;\r\n\r\n\t\t\t\t\tcoverageNotifier.$$canOmit = true;\r\n\r\n\t\t\t\t\tcoverageNotifier.$$tag = _tag;\r\n\r\n\t\t\t\t\thub.onDispatch(coverageNotifier);\r\n\t\t\t}\r\n\r\n            if(config.autoRehydrate === true){\r\n\t\t    \r\n\t\t\t    \tlet data = null;\r\n\t                    \r\n\t                if(!isNullOrUndefined(enforceCoverage.$$tag) \r\n\t                        && persistStore){\r\n\t                    \tdata = getNormalized(persistStore.getItem(enforceCoverage.$$tag));\r\n\t\t\t    \t}\r\n\t\t\t    \r\n\t\t\t    \tif(data &&\r\n\t\t\t    \t\t\t(data instanceof Object)\r\n\t                            && data.state){\r\n\t                        setAppState(data.state);\r\n\t                        this.updateAutoRehydrationState();\r\n                  \t}\r\n            }\r\n\r\n\t\t\tif(!config.runtime.spaMode){\r\n\t\t\t\t\r\n\t\t\t\tif(typeof config.runtime.shutDownHref === 'string'\r\n\t\t\t\t\t&& config.runtime.shutDownHref.length != 0){\r\n\r\n\t\t\t\t\twind.onbeforeunload = $createBeforeTearDownCallback(config);\r\n\t\t\t\t\r\n\t\t\t\t\twind.onunload = $createTearDownCallback(hub);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\r\n\t\t\t\tif(typeof config.runtime.shutDownHref === 'string'\r\n\t\t\t\t\t&& config.runtime.shutDownHref.length != 0){\r\n\r\n\t\t\t\t\tif(wind.addEventListener){\r\n\t\t\t\t\t\twind.document.documentElement.addEventListener('click', $createBeforeTearDownCallback(config), false);\r\n\t\t\t\t\t\twind.document.addEventListener('click', $createTearDownCallback(hub), false);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\twind.document.documentElement.attachEvent('onclick', $createBeforeTearDownCallback(config));\r\n\t\t\t\t\t\twind.document.attachEvent('onclick', $createTearDownCallback(hub), false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tconst Area = function(key){\r\n\r\n\t\t\tthis.put = value => {\r\n\t            \r\n\t\t\t\t/* \r\n\t\t\t\t\tIn IE 8-9, writing to sessionStorage is done asynchronously (other browsers write synchronously)\r\n\t\t\t\t\twe need to fix this by using IE proprietary methods\r\n\r\n\t\t\t\t\tSee: https://www.nczonline.net/blog/2009/07/21/introduction-to-sessionstorage/ \r\n\t\t\t\t*/\r\n\r\n        \t\tlet indexStart;\r\n\r\n        \t\tlet indexEnd;\r\n\t\t\r\n        \t\tconst isIE8Storage = ('remainingSpace' in sessStore) && (mode === 8);\r\n\r\n\t            \t\t// Detecting IE 8 to enable forced sync\r\n\t\t\t\tif(isIE8Storage){\r\n\t\t\t\t\tif(typeof sessStore.begin == 'function'){\r\n\t\t\t\t\t\tsessStore.begin();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n        \t\ttry{\r\n\r\n\t\t\t\t\tsessStore.setItem(key, setNormalized(value));\r\n\t\t\t\t\t\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* This is a fallback to support Opera Mini 4.4+ on Mobile */\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(cachedStorageKeys[key]){\r\n\t\t\t\t\t\t// we're in overwrite mode, so clear `key` out and push in update (below)\r\n\t\t\t\t\t\tindexStart = wind.name.indexOf(key);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tindexEnd = wind.name.indexOf('|', indexStart);\r\n\r\n\t\t\t\t\t\twind.name = wind.name.replace(wind.name.substring(indexStart, indexEnd), '');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(wind.name === \"\"){\r\n\r\n\t\t\t\t\t\twind.name = `${key}:=:${setNormalized(value)}|`;\r\n\r\n\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\twind.name += `${key}:=:${setNormalized(value)}|`;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcachedStorageKeys[key] = 1;\r\n\t\t\t\t}\r\n\r\n        \t\tif(isIE8Storage){\r\n\t\t\t\t\tif(typeof sessStore.commit == 'function'){\r\n\t\t\t\t\t\tsessStore.commit();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t            return key;\r\n\t        };\r\n\r\n\t\t\tthis.get = () => {\r\n\r\n\t\t\t\tlet indexStart, indexEnd, values;\r\n\t\t\t\t\r\n\t\t\t\t/* This is a fallback to support Opera Mini 4.4+ on Mobile */\r\n\t\t\t\t\r\n\t\t\t\ttry{\r\n\t\t\t\t\r\n\t\t\t\t\treturn getNormalized(sessStore.getItem(key)) || null;\r\n\t\t\t\t\t\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\r\n\t\t\t\t\tif(cachedStorageKeys[key]){\r\n\r\n\t\t\t\t\t\tindexStart = wind.name.indexOf(key);\r\n\r\n\t\t\t\t\t\tindexEnd = wind.name.indexOf('|', indexStart);\r\n\r\n\t\t\t\t\t\tvalues = (wind.name.substring(indexStart, indexEnd)).split(':=:') || [0, 0];\r\n\r\n\t\t\t\t\t\treturn getNormalized(values[1]) || null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.del = () => {\r\n\r\n\t\t\t\t\tlet indexStart;\r\n\r\n\t\t\t\t\tlet indexEnd;\r\n\t\t\t\t\t/* This is a fallback to support Opera Mini 4.4+ on Mobile */\r\n\t\t\t\t\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn sessStore.removeItem(key);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}catch(e){\r\n\t\t\t\t\r\n\t\t\t\t\t\tif(cachedStorageKeys[key]){\r\n\r\n\t\t\t\t\t\t\t// we're in delete mode\r\n\t\t\t\t\t\t\tindexStart = wind.name.indexOf(key);\r\n\r\n\t\t\t\t\t\t\tindexEnd = wind.name.indexOf('|', indexStart);\r\n\r\n\t\t\t\t\t\t\twind.name = wind.name.replace(wind.name.substring(indexStart, indexEnd), '');\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tdelete cachedStorageKeys[key];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\treturn this;\r\n\t};\r\n\r\n\tclass Dispatcher {\r\n\r\n\t\tconstructor() {\r\n\r\n            \tthis.middlewares = [];\r\n\r\n            \toperationOnStoreSignal.$$undoActionsStack = [];\r\n\r\n            \toperationOnStoreSignal.$$redoActionsStack = [];\r\n        }\r\n\r\n        updateAutoRehydrationState() {\r\n            \r\n            \tautoRehydrationOccured = true;\r\n        }\r\n\r\n        getAutoRehydrationState() {\r\n            \r\n            \treturn autoRehydrationOccured;\r\n        }\r\n\r\n        setMiddleware(middleware) {\r\n            \r\n                if(typeof middleware === 'function'\r\n                    /*&& (middleware.length >= 2)*/){\r\n\r\n                    return this.middlewares.push(middleware);\r\n                }\r\n\r\n                throw new Error(\"Radixx: Inavlid Middleware Callback - Must be a Function with Parameters ( >= 2 )\");\r\n\r\n        }\r\n\r\n        hasMiddleware() {\r\n            \r\n                return (this.middlewares.length > 0);\r\n\r\n        }\r\n\r\n        initCatchers(userConfig, hub) {\r\n\r\n        \t\tif(isNullOrUndefined(config)){\r\n\r\n\t\t\t\t\tconfig = extend(userConfig, defaultConfig);\r\n\r\n\t\t\t\t\tsetupConfigSettings.apply(this, [config, hub]);\r\n        \t\t}\r\n\r\n                if(wind.document.addEventListener){\r\n                    /* IE 9+, W3C browsers all expect the 'storage' event to be bound to the window */\r\n                    if(config.universalCoverage){\r\n                        wind.addEventListener('storage', enforceCoverage, false);\r\n                    }\r\n\r\n                    wind.document.addEventListener('storesignal', stateWatcher, false);\r\n\r\n                }else if(wind.document.attachEvent){\r\n                    /* IE 8 expects the 'storage' event handler to be bound to the document \r\n                        and not to the window */\r\n                    if(config.universalCoverage){\r\n                        wind.document.attachEvent('onstorage', enforceCoverage);\r\n                    }\r\n\r\n                    wind.document.attachEvent('onstoresignal', stateWatcher);\r\n                }\r\n\r\n        }\r\n\r\n        getRegistration(title) {\r\n\r\n\t            if(Hop.call(observers, title)){\r\n\t                \r\n\t                return observers[title];\r\n\t            }\r\n\r\n\t            return {};\r\n\t\t}\r\n\r\n\t\tregister(title, observer, defaultStoreContainer) {\r\n                \r\n                if(Hop.call(observers, title)){\r\n                    \r\n                    if('$$history' in observers[title]\r\n                         && typeof observer.$$history == 'undefined'){\r\n                        if(!stores[title]){ // If the store doesn't have any change listeners registered\r\n                            \r\n                            throw new Error(\"Radixx: Cannot Overwrite existing store registration\");\r\n                        \r\n                            return;\r\n                        }\r\n\r\n                        observer.$$history = observers[title].$$history;\r\n                        observer.$$historyIndex = observers[title].$$historyIndex;\r\n                        observer.$$store_listeners = observers[title].$$store_listeners;\r\n                        observers[title] = observer;\r\n                    }\r\n                }else{\r\n\r\n                    observer.$$store_listeners = [];\r\n                    observer.$$history = [(\r\n                            !!defaultStoreContainer ? \r\n                            defaultStoreContainer :\r\n                                 null\r\n                    )];\r\n                    observer.$$historyIndex = 0;\r\n                    observers[title] = observer;\r\n                    storeKeys.push(title);\r\n                }\r\n                \r\n                return true;\r\n        }\r\n\r\n        watch(callback) {\r\n\r\n                watchers.push(callback);\r\n        }\r\n\r\n        setStoreListener(store, callback) {\r\n\r\n            \tconst title = store.getTitle();\r\n\r\n\t            if(!isNullOrUndefined(observers[title])){\r\n\r\n\t                if(typeof callback == \"function\"){\r\n\t                    stores[title] = store;\r\n\t                    observers[title].$$store_listeners.push(callback);\r\n\t                }\r\n\t            }\r\n        }\r\n\r\n        unsetStoreListener(store, callback) {\r\n\r\n\t            const title = store.getTitle();\r\n\r\n\t            if(!isNullOrUndefined(observers[title])){\r\n\t                if(typeof callback == \"function\"){\r\n\r\n\t                    const pos = observers[title].$$store_listeners.indexOf(callback);\r\n\t                    observers[title].$$store_listeners.splice(pos, 1);\r\n\t                }\r\n\t            }\r\n\r\n        }\r\n\r\n        signalUnique(hydrateAction) {\r\n\r\n\t            if(hydrateAction.source != 'hydrate'){\r\n\t                return;\r\n\t            }\r\n\r\n\t            // Pass this on to the event queue [await]\r\n\t            wind.setTimeout(handlePromises, 0);\r\n\r\n\t            const stateArea = new Area(hydrateAction.target), regFunc = observers[hydrateAction.target];\r\n\r\n\t            operationOnStoreSignal.$$redoActionsStack.length = 0;\r\n\r\n\t            operationOnStoreSignal.$$redoActionsStack.push(hydrateAction);\r\n\r\n\t            regFunc.$$history.length = 0; // clear out the store state since this is a hydrate call\r\n\r\n\t            regFunc.historyIndex = -1;\r\n\r\n\t            operationOnStoreSignal(...[\r\n\t\t\t\t\tregFunc, \r\n\t\t\t\t\tnull, \r\n\t\t\t\t\tstateArea,\r\n\t\t\t\t\thydrateAction\r\n\t\t\t\t]);\r\n\r\n        }\r\n\r\n        handleStoreMutation(store, mutationType) {\r\n\r\n\t            if(!mutationType){\r\n\t                return;\r\n\t            }\r\n\r\n\t            const storeTitle = store.getTitle();\r\n\t            const isolatedState = {}; \r\n\t            const regFunc = this.getRegistration(storeTitle);\r\n\t            const stateArea = new Area(storeTitle);\r\n\r\n\t                switch(mutationType){\r\n\r\n\t                    case 'undo':\r\n\t                        if(store.canUndo()){\r\n\t                            \r\n\t                            --regFunc.$$historyIndex;\r\n\r\n\t                            isolatedState[storeTitle] = operationOnStoreSignal(...[\r\n\t\t\t\t\t\t\t\t\tregFunc,\r\n\t\t\t\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t\t\t\tstateArea,\r\n\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t]); \r\n\r\n\t                            // Pass this on to the event queue \r\n\t                            wind.setTimeout(fireWatchers.bind(null, isolatedState), 0);\r\n\r\n\t                            return true;\r\n\t                        }\r\n\t                    break;\r\n\t                    case 'redo':\r\n\t                        if(store.canRedo()){\r\n\r\n\t                            ++regFunc.$$historyIndex;\r\n\r\n\t                            isolatedState[storeTitle] = operationOnStoreSignal(...[\r\n\t\t\t\t\t\t\t\t\tregFunc,\r\n\t\t\t\t\t\t\t\t\tnull,\r\n\t\t\t\t\t\t\t\t\tstateArea,\r\n\t\t\t\t\t\t\t\t\tnull\r\n\t\t\t\t\t\t\t\t]);\r\n\r\n\t                            // Pass this on to the event queue \r\n\t                            wind.setTimeout(fireWatchers.bind(null, isolatedState), 0);\r\n\r\n\t                            return true;\r\n\r\n\t                        }\r\n\t                    break;\r\n\t                }\r\n\r\n\t                return false;\r\n        }\r\n\r\n        deletePersistenceTagAndData(){\r\n\r\n        \tif(isNullOrUndefined(config)){\r\n\r\n        \t\treturn false;\r\n        \t}\r\n\r\n        \tconst _origin = getAppOriginForPersist(config);\r\n\r\n\t\t\tconst _tag = generateTag(_origin);\r\n\r\n\t\t\tpersistStore.removeItem(_origin);\r\n\r\n\t\t\tpersistStore.removeItem(_tag);\r\n\r\n\t\t\treturn true;\r\n        }\r\n\r\n        rebuildStateFromActions() {\r\n\r\n\t            const actionsStack = operationOnStoreSignal.$$redoActionsStack;\r\n\r\n\t            each(actionsStack, (action, index) => {\r\n\r\n\t                let stateArea;\r\n\r\n\t                for(title in observers){\r\n\t                    if(Hop.call(observers, title)){\r\n\r\n\t                        stateArea = new Area(title);\r\n\r\n\t                        observers[title].call(action, stateArea.get());\r\n\t                    }\r\n\t                }\r\n\r\n\t            }, operationOnStoreSignal);\r\n        }\r\n\r\n        iterateOnStore(...args){\r\n\r\n        \treturn eachStore(...args);\r\n        }\r\n\r\n        signal(action) {\r\n\r\n\t            let compactedFunc = null;\r\n\r\n\t            // this is the function that does the actual dispatch of the \r\n\t            \r\n\t            const baseDispatchCallback = (observers, dispatcher, action, prevState) => {\r\n\r\n\t\t\t\t\t\tlet title, stateArea = null; \r\n\r\n\t\t\t\t\t\toperationOnStoreSignal.$$redoActionsStack.push(action);\r\n\r\n\t\t\t\t\t\tfor(title in observers){\r\n\t\t\t\t\t\t\tif(Hop.call(observers, title)){\r\n\r\n\t\t\t\t\t\t\t\tstateArea = new Area(title);\r\n\r\n\t\t\t\t\t\t\t\toperationOnStoreSignal(...[\r\n\t                                observers[title], \r\n\t                                dispatcher.queueing, \r\n\t                                stateArea,\r\n\t                                action\r\n\t                            ]);\r\n\t\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn getAppState();\r\n\t\t\t\t};\r\n\r\n\t            const boundBaseDispatchCallback = baseDispatchCallback.bind(null, observers, this);\r\n\r\n\t            const adjoiner = {\r\n\t                    /*createActionObject:function(_data, _type){\r\n\t                         \r\n\t                         return {\r\n\t                            source:\"\",\r\n\t                            actionType:_type,\r\n\t                            actionData:_data,\r\n\t                            actionKey:null\r\n\t                         };\r\n\t                    },*/\r\n\t                    createDispatchResolver(_action) {\r\n\r\n\t                        return boundBaseDispatchCallback.bind(null, _action);\r\n\t                    }\r\n\t            };\r\n\r\n\t            const _hasMiddleware = this.hasMiddleware();\r\n\r\n\r\n\t            // Some validation - just to make sure everything is okay\r\n\t            if(!(action.source in dispatchRegistry)){\r\n\r\n\t                return;\r\n\t            }\r\n\r\n\t            // determine if there are middleware callbacks registered\r\n\t            if(_hasMiddleware){ \r\n\t                \r\n\t                // collapse all middleware callbacks into a single callback\r\n\t                compactedFunc = this.middlewares.concat(\r\n\t                                    boundBaseDispatchCallback\r\n\t                                ).reduceRight((bound, middleware) => middleware.bind(null,\r\n\t                    bound\r\n\t                ));\r\n\r\n\t            }else {\r\n\r\n\t                compactedFunc = baseDispatchCallback;\r\n\t            }\r\n\r\n\t            // Pass this on to the event queue \r\n\t            wind.setTimeout(handlePromises, 0);\r\n\r\n\t            // begin cascading calls to the middlewares in turn\r\n\t            // from the last attached middleware all the way up\r\n\t            // to the first middleware until the action\r\n\t            // is finally dispatched\r\n\r\n\t            if(!isNullOrUndefined(compactedFunc)){\r\n\r\n\t                compactedFunc.apply(_hasMiddleware ? adjoiner : null, [action, getAppState()]);\r\n\r\n\t            }\r\n\t\t}\r\n\r\n\t\tsetActionsRegistry(regId){\r\n\r\n\t\t\tdispatchRegistry[regId] = {actionTypes:[]};\r\n\t\t}\r\n\r\n\t\taddToActonsRegistry(id, vector){\r\n\r\n\t\t\tif(! isNullOrUndefined(dispatchRegistry[id])){\r\n\t\t\t\t\tdispatchRegistry[id].actionTypes.push(\r\n\t\t\t\t\t\tvector\r\n\t\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tunregister(title) {\r\n\r\n\t            let observer, store, index;\r\n\r\n\t            if(!isNullOrUndefined(observers[title])){\r\n\t                // initial clean-up\r\n\r\n\t                observer = observers[title];\r\n\t                store = stores[title];\r\n\t                observer.$$store_listeners.length = 0;\r\n\t                observer.$$store_listeners = null;\r\n\t                observer.$$historyIndex = -1;\r\n\t                observer.$$history.length = 0;\r\n\t                observer.$$history = null;\r\n\t                \r\n\t                // more clean-up (freeing memory)\r\n\t                delete observers[title];\r\n\t                observer = null;\r\n\t                \r\n\t                delete stores[title];\r\n\t                store = null;\r\n\r\n\t                index = storeKeys.indexOf(title);\r\n\r\n\t                if(index != -1){\r\n\t                    storeKeys.splice(index, 1);\r\n\t                }\r\n\t            }\r\n\t\t}\r\n\r\n\t} \r\n\r\nexport { Dispatcher, Area }","import { wind, each, Hop, isNullOrUndefined } from '../utils/routines/basics.js';\r\nimport { Dispatcher, Area } from './dispatcher.js';\r\nimport { Values } from '../utils/routines/extras.js';\r\n\r\n\r\n\t\tlet $instance = null;\r\n\r\n\t\tconst getInstance = function(){\r\n\t\t\t\r\n\t\t\tif($instance === null){\r\n\r\n\t\t\t\t$instance = new Dispatcher();\r\n\t\t\t}\r\n\r\n\t\t\treturn $instance;\r\n\r\n\t\t};\r\n\r\n\t\tconst getObjectPrototype = obj => {\r\n\t\t\t\tif('getPrototypeOf' in Object){\r\n\t\t\t\t\treturn Object.getPrototypeOf(obj);\r\n\t\t\t\t}else if('__proto__' in obj){\r\n\t\t\t\t\tif(!(Hop.call(obj, '__proto__'))){\t\r\n\t\t\t\t\t\treturn (obj.__proto__);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if('constructor' in obj){\r\n\t\t\t\t\tif(!(Hop.call(obj, 'constructor'))){\t\r\n\t\t\t\t\t\treturn obj.constructor.prototype;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn obj;\r\n\t\t};\r\n\r\n\t\tconst eachStore = function(fn, extractor, storeArray) {\r\n\r\n            \tconst dispatcher = getInstance();\r\n\r\n            \treturn dispatcher.iterateOnStore(fn, extractor, storeArray);\r\n        };\r\n\r\n\t\tconst createStoreInterface = function(dispatcher, method) {\r\n\t\t\t\r\n\r\n\t\t\treturn function(){\r\n                let regFunc;\r\n                let area;\r\n                const argument = arguments.length ? arguments[0] : null;\r\n\r\n                if(method == 'setChangeListener'){\r\n\r\n\t\t\t\t\treturn dispatcher.setStoreListener(this, argument);\r\n\t\t\t\t}\r\n\r\n                if(method == 'unsetChangeListener'){\r\n\r\n\t\t\t\t\treturn dispatcher.unsetStoreListener(this, argument);\r\n\t\t\t\t}\r\n\r\n                if(method == 'getState'){\r\n\r\n\t\t\t\t\tvar title = this.getTitle(), value;\r\n\t\t\t\t\tarea = new Area(title);\r\n\t\t\t\t\tvalue = area.get();\r\n\t\t\t\t\tarea = null;\r\n\r\n\t\t\t\t\tif(value === null){\r\n\r\n\t\t\t\t\t\tregFunc = dispatcher.getRegistration(title);\r\n\r\n\t\t\t\t\t\tvalue = (regFunc.$$history.length ? regFunc.$$history[0] : null);\r\n\r\n\t\t\t\t\t}else if(typeof argument === 'string'){\r\n\r\n\t\t\t\t\t\tif(value instanceof Object){\r\n\r\n\t\t\t\t\t\t\tif(Hop.call(value, argument)){\r\n\r\n\t\t\t\t\t\t\t\tvalue = value[argument];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn value;\r\n\t\t\t\t}\r\n\r\n                if(method == 'destroy'){\r\n\r\n\t\t\t\t\tlet title, index;\r\n\r\n\t\t\t\t\tif(title in stores){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdelete stores[title];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tarea = new Area(this.getTitle());\r\n\r\n\t\t\t\t\tarea.del();\r\n\r\n\t\t\t\t\treturn (area = title = null);\r\n\t\t\t\t}\r\n\r\n                if(method == 'disconnect'){\r\n\r\n\t\t\t\t\treturn dispatcher.unregister(this.getTitle());\r\n\t\t\t\t}\r\n\r\n                if(method == 'hydrate'){\r\n\r\n\t\t\t\t\tif(isNullOrUndefined(argument)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn dispatcher.signalUnique({\r\n\t\t\t\t\t\tsource:method,\r\n\t\t\t\t\t\ttarget:this.getTitle(),\r\n\t\t\t\t\t\tactionData:argument\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n                if(method == 'getQuerySchema'){\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn {};\r\n\t\t\t\t}\r\n\r\n                if(method == 'setQuerySchema'){\r\n\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\r\n                if(method == 'canUndo'){\r\n\r\n\t\t\t\t\tregFunc = dispatcher.getRegistration(this.getTitle());\r\n\r\n\t\t\t\t\treturn (regFunc.$$historyIndex != 0);\r\n\t\t\t\t}\r\n\r\n                if(method == 'swapCallback'){\r\n\r\n\t\t\t\t\treturn dispatcher.register(this.getTitle(), argument);\r\n\t\t\t\t}\r\n\r\n                if(method == 'canRedo'){\r\n\t\t\t\t\t\r\n\t\t\t\t\tregFunc = dispatcher.getRegistration(this.getTitle());\r\n\r\n\t\t\t\t\treturn (regFunc.$$historyIndex !== regFunc.$$history.length - 1);\r\n\t\t\t\t}\r\n\r\n                if(method == 'undo'){\r\n\r\n\t\t\t\t\treturn dispatcher.handleStoreMutation(this, method);\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\r\n                if(method == 'redo'){\r\n\r\n\t\t\t\t\treturn dispatcher.handleStoreMutation(this, method);\r\n\r\n\t\t\t\t}\r\n            }\r\n\t\t\t\r\n\t\t};\r\n\r\n\t\tconst createActionInterface = function(dispatcher, vector) {\r\n\t\t\t\r\n\t\t\tif(!(vector instanceof Object)){\r\n\r\n\t\t\t\tthrow new TypeError(`Invalid Action Creator Vector, expected [object] but found [${typeof(vector)}]`);\r\n\t\t\t}\r\n\r\n\t\t\treturn function(data, stateAspectKey){\r\n\r\n\t\t\t\t // console.log('OUTER-FUNC: ', this.constructor.caller);\r\n\r\n\t\t\t\tconst id = this.getId();\r\n\t\t\t\t\r\n\t\t\t\tlet typesBitMask = 0;\r\n\r\n\t\t\t\tdispatcher.addToActonsRegistry(id, vector);\r\n\t\t\t\t\r\n\t\t\t\tif(vector.actionDefinition instanceof Array){\r\n\t\t\t\t\t\r\n\t\t\t\t\teach(vector.actionDefinition, function(definition){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\ttypesBitMask |= Number(Values.isOfType(definition, data));\r\n\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!typesBitMask){\r\n\t\t\t\t\t   \r\n\t\t\t\t\t\tthrow new TypeError(`Action Data Invalid for action: [${vector.type}]`);\r\n\t\t\t\t   \t}\r\n\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(!Values.isOfType(vector.actionDefinition, data)){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthrow new TypeError(`Action Data Invalid for action: [${vector.type}]`);\r\n\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn dispatcher.signal({\r\n\t\t\t\t\tsource:id,\r\n\t\t\t\t\tactionType:vector.type,\r\n\t\t\t\t\tactionKey:stateAspectKey || null,\r\n\t\t\t\t\tactionData:data\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tconst watchDispatcher = function(callback) {\r\n\r\n\t\t\tconst dispatcher = getInstance();\r\n\r\n\t\t\tdispatcher.watch(callback);\r\n\t\t\t\t\t\r\n\t\t};\r\n\r\n\t\tconst isAppStateAutoRehydrated = function() {\r\n\r\n\t\t\tconst dispatcher = getInstance();\r\n\r\n\t\t\treturn dispatcher.getAutoRehydrationState();\r\n\r\n\t\t};\r\n\r\n\t\tconst setupShutdownCallback = function(callback, hub){\r\n\r\n\t\t\t\t\r\n\t\t\thub._ping = callback;\r\n\t\t\t\t\r\n\t\t};\r\n\r\n\t\tconst mergeConfig = function(userConfig, hub) {\r\n\r\n\t\t\tconst dispatcher = getInstance();\r\n\r\n\t\t\treturn dispatcher.initCatchers(userConfig, hub);\r\n\t\t};\r\n\r\n\t\tconst purgePersistStore = function() {\r\n\r\n\t\t\tconst dispatcher = getInstance();\r\n\r\n\t\t\tdispatcher.deletePersistenceTagAndData();\r\n\r\n\t\t};\r\n\r\n\t\tconst registerAction = function() {\r\n\t\t\t/* creates hex value e.g. '0ef352ab287f1' */\r\n\t\t\tconst regId = Math.random().toString(16).substr(2, 13); \r\n\t\r\n\t\t\tconst dispatcher = getInstance();\r\n\r\n\t\t\tdispatcher.setActionsRegistry(regId);\r\n\r\n\t\t\treturn regId;\r\n\r\n\t\t};\r\n\r\n\t\tconst makeAggregator = function() {\r\n\r\n\t\t\t\treturn {\r\n\t\t\t\t\tquery:`graphql {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}`\r\n\t\t\t\t};\r\n\t\t};\r\n\r\n\t\tconst setMiddlewareCallback = function(middlewareFunc) {\r\n\r\n\t\t\tconst dispatcher = getInstance();\r\n\r\n\t\t\t// HERE: using this try/catch for control flow and not defensive programming\r\n\t\t\ttry{\r\n\r\n\t\t\t\tdispatcher.getMiddleware();\r\n\r\n\t\t\t}catch(ex){\r\n\r\n\t\t\t\tdispatcher.setMiddleware(\r\n\t\t\t\t\tmiddlewareFunc\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tconst setActionVectors = function(object, vectors) {\r\n\r\n            const _proto = getObjectPrototype(object);\r\n            const dispatcher = getInstance();\r\n            let vector = null;\r\n\r\n            for(const creator in vectors){\r\n\t\t\t\tif(Hop.call(vectors, creator)){\r\n\t\t\t\t     vector = vectors[creator];\t\r\n\t\t\t\t     _proto[creator] = createActionInterface(dispatcher, vector);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n            return object;\r\n        };\r\n\r\n\t\tconst setStoreObserver = function(object, regFunc, defaultStateObj) {\r\n            \r\n            if(typeof regFunc !== \"function\"){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n            const _proto = getObjectPrototype(object);\r\n            const dispatcher = getInstance();\r\n            const title     = object.getTitle();\r\n            let method = null;\r\n\r\n            dispatcher.register(title, regFunc, defaultStateObj);\r\n\r\n            const methods = [\r\n            \t'setChangeListener', \r\n            \t'unsetChangeListener', \r\n            \t'getState', \r\n            \t'disconnect', \r\n            \t'getQuerySchema', \r\n            \t'canRedo', \r\n            \t'canUndo', \r\n            \t'swapCallback', \r\n            \t'undo', \r\n            \t'redo', \r\n            \t'hydrate', \r\n            \t'destroy'\r\n        \t];\r\n\r\n            for(let c=0; c < methods.length; c++){\r\n\t\t\t\tmethod = methods[c];\r\n\r\n\t\t\t\t_proto[method] = createStoreInterface(dispatcher, method);\r\n\t\t\t}\r\n\t\t};\r\n\r\nexport { eachStore, makeAggregator, registerAction, setupShutdownCallback, mergeConfig, purgePersistStore, setMiddlewareCallback, setActionVectors, setStoreObserver, watchDispatcher, isAppStateAutoRehydrated }","import * as observable from './components/observable.js';\r\nimport { Action, Store } from './utils/routines/extras.js';\r\nimport { Helpers } from './utils/helpers.js';\r\nimport { Payload } from './utils/primitive-checkers.js'\r\n\r\n /*!\r\n  * @lib: Radixx\r\n  * @version: 0.1.3\r\n  * @author: Ifeora Okechukwu\r\n  * @created: 30/12/2016\r\n  *\r\n  * All Rights Reserved 2016 - 2018.\r\n  * Use, reproduction, distribution, and modification of this code is subject to the terms and\r\n  * conditions of the MIT license, available at http://www.opensource.org/licenses/mit-license.php\r\n  *\r\n  * @desc: Implementation of Facebooks' Flux Architecture with a Twist. [ ES6 ]\r\n  */\r\n\r\n\r\nconst toString = function(){\r\n\r\n    return \"[object RadixxHub]\";\r\n}\r\n\r\nconst makeStore = function(dataTitle, registerCallback, defaultStateObj){\r\n    \r\n    function _store(...args){\r\n        Store.apply(this, [...args]);\r\n    }\r\n\r\n    const storeObject = new _store(dataTitle);\r\n\r\n    observable.setStoreObserver(storeObject, registerCallback, defaultStateObj);\r\n\r\n    return storeObject;\r\n}\r\n\r\nconst makeActionCreators = function(vectors){\r\n    function _action(...args){\r\n            Action.apply(this, [...args]);\r\n    }\r\n\r\n    const actionObject = new _action(observable.registerAction());\r\n\r\n    return observable.setActionVectors(actionObject, vectors);\r\n}\r\n\r\nconst purgePersistentStorage = function(){\r\n    \r\n    observable.purgePersistStore();\r\n}\r\n\r\nconst eachStore = function(callback){\r\n    \r\n    return observable.eachStore(\r\n        function(...args){\r\n            callback(...args);\r\n        }, function(stores, key){\r\n\r\n                this.push(stores[key]);\r\n    }, null);\r\n}\r\n\r\nconst attachMiddleware = function(callback) {\r\n\r\n    return observable.setMiddlewareCallback(function(...args){\r\n        callback(...args)\r\n    });\r\n}\r\n\r\nconst isAppStateAutoRehydrated = function() {\r\n\r\n    return observable.isAppStateAutoRehydrated();\r\n}\r\n\r\nconst onDispatch = function(handler){\r\n    \r\n    if(typeof handler === 'function'){\r\n\r\n        observable.watchDispatcher(function(...args){\r\n            handler(...args)\r\n        });\r\n    }\r\n}\r\n\r\nconst requestAggregator = function() {\r\n\r\n    return observable.makeAggregator();\r\n}\r\n\r\nlet _hub = {\r\n    eachStore,\r\n    onDispatch,\r\n    isAppStateAutoRehydrated,\r\n    purgePersistentStorage,\r\n    toString\r\n};\r\n\r\nconst configure = function(config) {\r\n    \r\n    return observable.mergeConfig(config, _hub);\r\n}\r\n\r\nconst onShutdown = function(handler){\r\n\r\n    if(typeof handler === \"function\"){\r\n\r\n        observable.setupShutdownCallback(function(...args){\r\n            handler(...args);\r\n        }, _hub);\r\n    }\r\n\r\n}\r\n\r\nexport { Helpers, Payload, makeStore, makeActionCreators, purgePersistentStorage, isAppStateAutoRehydrated, requestAggregator, configure, eachStore, attachMiddleware, onDispatch, onShutdown, toString }\r\n","import { wind } from './routines/basics.js';\r\n\r\nconst Helpers = {\r\n        isEqual(former, latter) {\r\n                      if (former === latter) {\r\n                        return true;\r\n                      }\r\n\r\n                      if (typeof former !== 'object' || former === null ||\r\n                          typeof latter !== 'object' || latter === null) {\r\n                            return false;\r\n                      }\r\n\r\n                      const keysA = wind.Object.keys(former);\r\n                      const keysB = wind.Object.keys(latter);\r\n\r\n                      if (keysA.length !== keysB.length) {\r\n                        return false;\r\n                      }\r\n\r\n                      // Test for A's keys different from B.\r\n                      const bHasOwnProperty = wind.hasOwnProperty.bind(latter);\r\n                      for (let i = 0; i < keysA.length; i++) {\r\n                        if (!bHasOwnProperty(keysA[i]) || former[keysA[i]] !== latter[keysA[i]]) {\r\n                          return false;\r\n                        }\r\n                      }\r\n        }\r\n};\r\n\r\nexport { Helpers }\r\n","import { wind } from './routines/basics.js';\r\n\r\nconst Payload = {\r\n        type:{\r\n                     \"array\":\"array\",\r\n                     \"date\":\"date\",\r\n                     \"string\":\"string\",\r\n                     \"regexp\":\"regexp\",\r\n                     \"boolean\":\"boolean\",\r\n                     \"function\":\"function\",\r\n                     \"object\":\"object\",\r\n                     \"number\":\"number\",\r\n                     error(value) {\r\n\r\n                            return (value instanceof wind.Error || value instanceof wind.TypeError);\r\n                     },\r\n                     nullable(value) {\r\n\r\n                            return (value === null || value === undefined);\r\n                     },\r\n                     \"numeric\":{\r\n                        Int(value) {\r\n                            \r\n                            return wind.isFinite(value) && (value === wind.parseInt(value))\r\n                        },\r\n                        Float(value) {\r\n\r\n                            return wind.isFinite(value) && (value === wind.parseFloat(value))\r\n                        }\r\n                     },\r\n                     any(value) {\r\n                            \r\n                            return (value !== null || value !== undefined);\t \t\t\t\r\n                     }\r\n          }\r\n};\r\n\r\nexport { Payload }\r\n","\r\nconst wind = (('undefined' !== typeof process &&\r\n    '[object process]' === ({}).toString.call(process)) ||\r\n  ('undefined' !== typeof navigator && navigator.product === 'ReactNative')\r\n? global : typeof window !== \"undefined\" ? window : self);\r\n\r\nconst Hop = ({}).hasOwnProperty;\r\n\r\nconst Slc = ([]).slice;\r\n\r\nconst isNullOrUndefined = obj => obj == void 0;\r\n\r\n\r\nconst each = (obj, iterator, context) => {\r\n\t\r\n\tif(context === undefined){\r\n\r\n\t\t    context = null;\r\n\t}\r\n\r\n\tfor(let prop in obj){\r\n\t\t  if(Hop.call(obj, prop)){\r\n\t\t\t    iterator.call(context, obj[prop], prop, obj);\r\n\t\t  }\r\n\t}\r\n};\r\n\r\n/**\r\n *\r\n * @params\r\n * @params\r\n * @return\r\n */\r\n\r\nconst extend = (source, dest) => {\r\n\r\n\t let merge = {};\r\n\r\n\t for(let prop in dest){\r\n  \t\tif(Hop.call(dest, prop)){\r\n\r\n    \t\t\tif(typeof dest[prop] === \"object\"\r\n    \t \t\t\t&& dest[prop] !== null){\r\n    \t\t\t \tmerge[prop] = extend(source[prop], dest[prop]);\r\n    \t\t\t }else if(source && Hop.call(source, prop)){\r\n    \t\t\t \tmerge[prop] = source[prop];\r\n    \t\t\t }else {\r\n    \t\t\t \tmerge[prop] = dest[prop];\r\n    \t\t\t }\r\n  \t\t}\r\n\t }\r\n\r\n\treturn merge;\r\n};\r\n\r\nconst curry = (func, args, context) => function(){\r\n    let _args = Slc.call(arguments);\r\n    return func.apply(context, args.concat(_args)); \r\n};\r\n\r\nconst futuresStates = {\r\n     STARTED:0,\r\n     AWAIT:1,\r\n     RESOLVED:2,\r\n     REJECTED:3\r\n};\r\n\r\nconst formatOptions = opts => {\r\n     const options = {}, _opts = String(opts).split(\",\");\r\n     each(_opts, key => {\r\n           options[key] = true;\r\n     });\r\n     options.savedData = !1;\r\n     return options;\r\n};\r\n\r\nconst Routines = opts => {\r\n    const options = formatOptions(opts);\r\n    let fireStart;\r\n    let fireEnd;\r\n    let index;\r\n    let fired;\r\n    let firing;\r\n    let pending = [];\r\n    let queue = options.multiple && [];\r\n\r\n    const fire = data => {\r\n          options.savedData = !fire.$decline && options.save && data; // save it only when we are not rejecting {fire.$decline != true}!\r\n          fired = true;\r\n          firing = true; // firing has begun!\r\n          index = fireStart || 0;\r\n          fireEnd = pending.length;\r\n\t    \r\n          for(fireStart = 0; index < fireEnd; index++){\r\n                 // @TODO: need to curry args instead of directly binding them #DONE\r\n               wind.setTimeout(curry(pending[index], data[1], data[0])/*.bind(data[0], data[1])*/, 20); // fire asynchronously (Promises/A+ spec requirement)\r\n          }\r\n\t    \r\n          firing = false; // firing has ended!\r\n\r\n          if(queue){ // deal with the queue if it exists and has any contents...\r\n              if(queue.length){\r\n                  return fire(queue.shift()); // fire on the {queue} items recursively\r\n              }\r\n               // if queue is empty.... then end [flow of control] at this point!\r\n          }\r\n\r\n          fire.$decline = false;\r\n          \r\n          if(options.savedData){\r\n             if(options.unpack){\r\n                 // clear our {pending} list and free up some memeory!!\r\n                 pending.length = 0; // saves the reference {pending} and does not replace it!\r\n             }\r\n          }\r\n };\r\n\r\n    return {\r\n    add() {\r\n        let len = 0;\r\n        if(pending){ // if not disbaled\r\n            \r\n            const start = pending.length;\r\n            (function add(args){\r\n             \r\n                   each(args, arg => {\r\n\t\t\t  const type = typeof arg;\r\n                          \r\n                          if(type == \"function\"){\r\n                             \tlen = pending.push(arg);\r\n                          }else{\r\n                             if(!!arg && arg.length && typeof arg != \"string\"){\r\n                             \t // inspect recursively\r\n                                 add(Slc.call(arg)); \r\n                             }\r\n                          }\r\n                   });\r\n             \r\n             }(Slc.call(arguments)));\r\n            \r\n            \r\n\t\t\tif( fired ){ // if we have already run the {pending} list of routines at least once, ...\r\n\t\t\t\t   if(options.join){\r\n\t\t\t\t\t  fireStart = start; \r\n\t\t\t\t\t  fireEnd = len; // update info again...\r\n\t\t\t\t\t  fire.$decline = true;\r\n\t\t\t\t\t  fire( options.savedData ); // fire with the saved data \r\n\t\t\t\t\t  this.disable();\r\n\t\t\t\t\t  \r\n\t\t\t\t   }  \r\n\t\t\t}\r\n            \r\n            \r\n        }\r\n        return len;\r\n    },\r\n    hasFn(fn) {\r\n\t    \tlet result = false;\r\n            \teach(pending, val => {\r\n\t\t     if(typeof fn === \"function\" && fn === val)\r\n\t\t\t      result = true;\r\n\t\t}, this);\r\n\t\treturn result;\r\n    },\r\n    hasList() {\r\n        return !!pending; // [false] only when the disabled(); method has been called!!\r\n    },\r\n    fireWith() /* context, args */{\r\n        if(pending && (!fired || queue)){\r\n            const args = arguments.length && Slc.call(arguments) || [null, 0];\r\n            \r\n            if(firing){ // we are currently iterating on the {pending} list of routines\r\n                queue.push( args ); // queue assets for recursive firing within {fire} function later\r\n            }else{\r\n                fire( args );\r\n            }\r\n        }\r\n    },\r\n    disable() {\r\n\t    if(!options.savedData){\r\n             pending = queue = undefined;\r\n\t    }\r\n    }\r\n  };\r\n};\r\n\r\n// Futures constructor - Promises/A+ Spec Implementation (Influenced by jQuery though...)\r\n\r\nlet Futures = function(){\r\n\r\n    const defTracks = {\r\n        resolve:['done', 'RESOLVED', Routines(['join', 'save'])],\r\n        reject:['fail', 'REJECTED', Routines(['join','save'])],\r\n        notify:['progress', 'AWAIT', Routines(['join', 'multiple'])]\r\n    };\r\n\r\n    const self = this;\r\n    let keys = Object.keys(defTracks);\r\n\r\n    let setter = (fnName, arr, forPromise) => {\r\n        const drop = (fnName != \"notify\");\r\n        if(!arr.length && !forPromise) return defTracks[fnName][2].fireWith;\r\n        return (!forPromise)? function(){\r\n            if(self.state >= 0 && self.state <=1){\r\n                self.state = futuresStates[defTracks[fnName][1]];\r\n            }\r\n\r\n            defTracks[fnName][2].fireWith(self === this? self : this, [].slice.call(arguments));\r\n\r\n            if(drop){\r\n\t\t\t    defTracks[arr[0]][2].disable();\r\n                defTracks[arr[1]][2].disable();\r\n\t\t\t    switch(fnName){\t\r\n\t\t\t\t   case \"reject\":\r\n\t\t\t\t   case \"resolve\":\r\n\t\t\t\t      self.state = futuresStates[defTracks[fnName][1]];\r\n\t\t\t\t   break;\r\n\t\t\t    }\t\r\n\t\t\t}\r\n            return true;\r\n        } : function(){\r\n            if(self.state >= 0 && self.state <=1){\r\n                defTracks[fnName][2].add.apply(self, Slc.call(arguments));\r\n            }\r\n            return self;\r\n        } ;\r\n    };\r\n\r\n    let i = 0;\r\n    let ax = keys.slice();\r\n    let d;\r\n    const promise = {};\r\n\r\n\r\n    // using a closure to define all the functions on the fly...\r\n\r\n    for(d in defTracks){\r\n        if(Hop.call(defTracks, d)){\r\n            keys.splice(i++, 1);\r\n            self[d] = setter(d, keys);\r\n            self[`${d}With`] = setter(d, []);\r\n            promise[defTracks[d][0]] = setter(d, [], true);\r\n            keys = ax.slice();\r\n        }\r\n    }\r\n\r\n    promise.state = futuresStates.STARTED;\r\n\r\n    promise.always = function(){\r\n        return this.done.apply(self, arguments).fail.apply(self, arguments);\r\n    };\r\n\r\n    promise.promise = obj => {\r\n        if(obj && typeof obj == \"object\" && !obj.length){\r\n            for(const i in promise){\r\n                if(Hop.call(promise, i)){\r\n                    obj[i] = promise[i];\r\n                }\r\n            }\r\n            return obj;\r\n        }\r\n        return promise;\r\n    };\r\n\r\n    promise.then = function(/* fnDone, fnFail, fnProgress */){\r\n        let ret;\r\n        const args = [].slice.call(arguments);\r\n        args.forEach((item, i) => {\r\n                     item = (typeof item == \"function\") && item;\r\n                     self[defTracks[keys[i]][0]](function(){\r\n\t\t\t\t\t\t\tlet rt;\r\n\t\t\t\t\t\t\ttry{ \r\n\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\tPromises/A+ specifies that errors should be contained\r\n\t\t\t\t\t\t\t\t\tand returned as value of rejected promise\r\n\t\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\t   rt = item && item.apply(this, arguments);\r\n\t\t\t\t\t\t\t}catch(e){ \r\n\t\t\t\t\t\t\t   rt = this.reject(e);\r\n\t\t\t\t\t\t\t}finally{\r\n\t\t\t\t\t\t\t   if(rt && typeof rt.promise == \"function\")\r\n\t\t\t\t\t\t\t        ret = rt.promise();\t\t\t\t\t\t   \r\n\t\t\t\t\t\t\t}\t   \r\n                     });\r\n        });\r\n        return self.promise(ret);\r\n    };\r\n\r\n    promise.isResolved = () => !defTracks['reject'][2].hasList();\r\n    promise.isRejected = () => !defTracks['resolve'][2].hasList();\r\n    promise.pipe = promise.then;\r\n\r\n    promise.promise(self);\r\n\r\n    Futures.STARTED = futuresStates.STARTED;\r\n    Futures.AWAITING = futuresStates.AWAIT;\r\n    Futures.RESOLVED = futuresStates.RESOLVED;\r\n    Futures.REJECTED = futuresStates.REJECTED;\r\n\r\n    /* avoid leaking memory with each call to Futures constructor!! */\r\n    setter = ax = d = i = null;\r\n\r\n    /* enforce {new} on constructor */\r\n    return (self instanceof Futures)? self : new Futures();\r\n};\r\n\r\nexport { Hop, Slc, isNullOrUndefined, wind, each, extend, curry, Futures }\r\n","import { wind } from './basics.js';\r\n\r\nlet __beforeunload = wind.onbeforeunload;\r\n\r\nlet __unload = wind.onunload;\r\n\r\nlet __hasDeactivated = false;\r\n\r\nlet _checkAndKillEventPropagation = event => {\r\n  if(event.type === 'click'){\r\n      if(event.stopPropagation){\r\n        event.stopPropagation();\r\n      }else{\r\n        event.cancelBubble = true;\r\n      }\r\n    }\r\n};\r\n\r\nconst $createBeforeTearDownCallback = config => e => {\r\n  \r\n    // @See: https://greatgonzo.net/i-know-what-you-did-on-beforeunload/\r\n\r\n    /* \r\n         `lastActivatedNode` variable is used to track the DOM Node that last \r\n         had focus (or was clicked) just before the browser triggered the `beforeunload` event \r\n     */\r\n\r\n    const lastActivatedNode = (wind.currentFocusElement // Mobile Browsers [ Custom Property ]\r\n                || e.explicitOriginalTarget // old/new Firefox\r\n                    || (e.srcDocument && e.srcDocument.activeElement) // old Chrome/Safari\r\n                        || (e.currentTarget && e.currentTarget.document.activeElement) // Sarafi/Chrome/Opera/IE\r\n                            || e.srcElement\r\n                                || e.target);\r\n\r\n    // if the \"imaginary\" user is logging out\r\n    const leaveMessage = \"Are you sure you want to leave this page ?\";\r\n\r\n    const isLogoff = ((typeof lastActivatedNode.hasAttribute == 'function' && lastActivatedNode.hasAttribute('data-href') && lastActivatedNode.getAttribute('data-href').includes(config.runtime.shutDownHref)) \r\n                    || (('href' in lastActivatedNode) && (lastActivatedNode.href.includes(config.runtime.shutDownHref))));\r\n\r\n    const __timeOutCallback = () => {\r\n            \r\n            __hasDeactivated = __timeOutCallback.lock;\r\n\r\n    };\r\n\r\n    // console.log('Node: '+ lastActivatedNode);\r\n\r\n    __timeOutCallback.lock = __hasDeactivated = true;\r\n    let beforeUnloadTimer = wind.setTimeout(__timeOutCallback, 0);\r\n\r\n    if(isLogoff){ // IE/Firefox/Chrome 34+\r\n        if(!!~e.type.indexOf('beforeunload')){\r\n            e.returnValue = leaveMessage; \r\n        }else{\r\n            _confirm = wind.confirm && wind.confirm(leaveMessage);\r\n            \r\n            if(!_confirm){\r\n                _checkAndKillEventPropagation(e);\r\n            }\r\n        }\r\n    }else{\r\n        _checkAndKillEventPropagation(e);\r\n    }\r\n\r\n    /* if (isLogoff) isn't true, no beforeunload dialog is shown */\r\n    return ((isLogoff) ?  ((__timeOutCallback.lock = false) || leaveMessage) : wind.clearTimeout(beforeUnloadTimer));\r\n};\r\n\r\nconst $createTearDownCallback = hub => e => {\r\n\r\n    /*\r\n        This seems to be the best way to setup the `unload` event \r\n        listener to ensure that the load event is always fired even if the page\r\n        is loaded from the `bfcache` (Back-Forward-Cache) of the browser whenever\r\n        the back and/or forward buttons are used for navigation instead of links.\r\n        Registering it as a property of the `window` object sure works every time\r\n    */\r\n\r\n            if(!__hasDeactivated){\r\n\r\n                wind.setTimeout(() => {\r\n\r\n                        let appstate = {};\r\n                    \r\n                        hub.eachStore((store, next) => {\r\n\r\n                            const title = store.getTitle();\r\n\r\n                            appstate[title] = store.getState(); \r\n                        \r\n                            store.disconnect();\r\n                            store.destroy();\r\n\r\n                            next();\r\n\r\n                        });\r\n\r\n                        if(typeof hub._ping == \"function\"){\r\n\r\n                            hub._ping.call(hub, appstate);\r\n                        }\r\n\r\n                        if(e.type != 'click'){\r\n                            __unload(e);\r\n                        }\r\n\r\n                }, 0);\r\n            }\r\n};\r\n\r\nconst Values = {\r\n      typesMap:{\r\n                \"number\":Number,\r\n                \"array\":Array,\r\n                \"object\":Object,\r\n                \"string\":String,\r\n                \"boolean\":Boolean,\r\n                \"date\":Date,\r\n                \"regexp\":RegExp,\t\r\n                \"function\":Function\r\n      },\r\n      isOfType(type, value) {\r\n\r\n            if(typeof type === 'function'){\r\n                \r\n                return type(value);\r\n            }\r\n\r\n            else if(typeof type === 'string'\r\n                        && (type in this.typesMap)){\r\n                type = type.toLowerCase(); // hoisting\r\n\r\n                return (/^string|function$/.test(typeof value)) \r\n                            || (Object(value) instanceof this.typesMap[type]);\r\n            }\r\n\r\n            return false;\r\n      }\r\n};\r\n\r\n\r\n// Store Constructor\r\nconst Store = (function(){\r\n\r\n\tvar requirementTypes = ['graph-ql', 'rest'];\r\n\r\n\tvar serviceRequirementsMap = {};\r\n\r\n\tvar dependentStores = {};\r\n\t\r\n\treturn function(title){\r\n\r\n\t\tvar that = this;\r\n\r\n\t\tthis.getTitle = function(){\r\n\r\n\t\t\treturn title;\r\n\t\t};\r\n\r\n\t\tthis.toJSON = function(){\r\n\r\n\t\t\treturn {\r\n                title\r\n            };\r\n\t\t};\r\n\r\n\t\tthis.makeTrait = function(callback){\r\n\r\n\t\t\tvar argsLeft = Slc.call(arguments, 1);\r\n\r\n\t\t\tif(typeof callback === 'function'){\r\n\r\n\t\t\t\targsLeft.unshift(this);\r\n\r\n\t\t\t\treturn callback.apply(null, argsLeft);\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t};\r\n\r\n\t\tthis.waitsFor = function(){\r\n\r\n\t\t\t([]).push.apply(dependentStores, Slc.call(arguments));\r\n\t\t};\r\n\r\n\t\tthis.toString = function(){\r\n\r\n\t\t\treturn \"[object RadixxStore]\";\r\n\t\t};\r\n\t}\t\r\n\r\n}());\r\n\r\n// Action constructor\r\nconst  Action = (function(){\r\n\r\n    return function(id){\r\n\r\n            this.getId = function(){\r\n\r\n                return id;\r\n            }\r\n\r\n            this.toJSON = function(){\r\n\r\n                return {\r\n                    id\r\n                }\r\n            };\r\n\r\n            this.toString = function(){\r\n\r\n                return \"[object RadixxActionCreator]\";\r\n            };\r\n    }\r\n\r\n}());\r\n\r\n\r\nexport { Values, Store, Action, $createBeforeTearDownCallback, $createTearDownCallback }"],"sourceRoot":""}